import{j as s}from"./ui-UjROl1yU.js";import{c as x}from"./button-Dq94DUpE.js";import{z as $}from"./app-D0w2CfcE.js";import{a as u}from"./vendor--ALJc334.js";function L({text:e,className:r=""}){const d=u.useRef(null),o=u.useRef(null),[a,n]=u.useState(!1);return u.useEffect(()=>{const t=()=>{if(d.current&&o.current){const m=d.current.offsetWidth,p=o.current.scrollWidth;n(p>m)}};t();const l=setTimeout(t,100);return window.addEventListener("resize",t),()=>{clearTimeout(l),window.removeEventListener("resize",t)}},[e]),s.jsx("div",{ref:d,className:`overflow-hidden w-full ${r}`,children:s.jsxs("div",{className:`${a?"animate-marquee-pause":""} ${a?"inline-flex":""}`,children:[s.jsx("span",{ref:o,className:`${a?"inline-block whitespace-nowrap pr-16":"block truncate"}`,children:e}),a&&s.jsx("span",{className:"inline-block whitespace-nowrap pr-16","aria-hidden":"true",children:e})]})})}function O({track:e,layout:r="grid",rootClass:d,rtc:o=!1}){var m,p,h,c,f,g,w,_,b,F,j,v,N,y,M,A,E,S,B;const{theme:a}=$();let n,t=null;const l=typeof e.track_data=="string"?JSON.parse(e.track_data):e.track_data||{};if(e.source==="spotify")n=((h=(p=(m=l.album)==null?void 0:m.images)==null?void 0:p[0])==null?void 0:h.url)??n,(c=l.album)!=null&&c.release_date&&(t=l.album.release_date.substring(0,4));else if(e.source==="Apple Music"){const i=(f=l.attributes)==null?void 0:f.artwork;i!=null&&i.url&&(n=i.url.replace("{w}",Math.max(100,i.width||300)).replace("{h}",Math.max(100,i.height||300))),(g=l.attributes)!=null&&g.releaseDate&&(t=l.attributes.releaseDate.substring(0,4))}return s.jsxs("div",{className:x("singleCard min-w-[300px] w-full h-full flex",r==="grid"?"flex-col":"flex-row",d),children:[s.jsx("div",{children:"album"in l?s.jsx("img",{src:n||(e==null?void 0:e.album_cover),className:`rounded-3xl ${r==="grid"?"w-full aspect-square md:aspect-auto md:min-h-[392px]":"min-w-[120px] max-w-[120px] sm:min-w-[300px] min-h-[300px] h-full"} object-cover`,alt:e.track_name+" image"}):s.jsx("img",{src:n||((F=(b=(_=(w=e==null?void 0:e.track_data)==null?void 0:w.album)==null?void 0:_.images)==null?void 0:b[0])==null?void 0:F.url)||((N=(v=(j=e==null?void 0:e.track_data)==null?void 0:j.attributes)==null?void 0:v.artwork)==null?void 0:N.url)||(e==null?void 0:e.album_cover),className:`w-full rounded-3xl ${r==="grid"?"w-full aspect-square md:aspect-auto md:min-h-[392px]":"min-w-[120px] max-w-[120px] sm:min-w-[300px] min-h-[300px] h-full"} object-cover`,alt:e.track_name+" image"})}),s.jsxs("div",{className:x("trackCardMask w-full h-full p-3.5 rounded-[38px] md:rounded-[44px] bottomRightMain relative backdrop-blur-2xl flex flex-col",r==="grid"?"-mt-14":"sm:-ml-8",r==="grid"?"bg-[linear-gradient(to_bottom,_#eaeaea50,_#F1F1F1,_#F1F1F1,_#F1F1F1)] dark:bg-[linear-gradient(to_bottom,_#19191982,_#19191982)]":"bg-[linear-gradient(to_right,_#eaeaea50,_#F1F1F1,_#F1F1F1,_#F1F1F1)] dark:bg-[linear-gradient(to_right,_#19191982,_#19191982)]",a==="light"&&o&&"bg-[linear-gradient(to_bottom,_#eaeaea50,_#FFFFFF,_#FFFFFF,_#FFFFFF)]"),children:[s.jsxs("div",{className:"bg-[#ffffffcf] dark:bg-[#FFFFFF1F] rounded-full p-1 pr-1.5 md:p-2 flex justify-between items-center",children:[s.jsxs("p",{className:"flex items-center gap-1 max-w-[calc(100%-110px)]",children:[s.jsx("span",{className:"dark:invert transform scale-75 md:scale-100 bg-[#E1E0E0] dark:bg-[#E1E0E040] p-2 rounded-full",children:s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"lucide lucide-audio-lines w-4 h-4 text-gray-900",children:[s.jsx("path",{d:"M2 10v3"}),s.jsx("path",{d:"M6 6v11"}),s.jsx("path",{d:"M10 3v18"}),s.jsx("path",{d:"M14 8v7"}),s.jsx("path",{d:"M18 5v13"}),s.jsx("path",{d:"M22 10v3"})]})}),s.jsx(L,{text:e.track_name})]}),s.jsx("p",{className:"bg-orange-500 text-white px-8 rounded-full py-0.5 text-xs md:text-base",children:t||new Date().getFullYear()})]}),s.jsxs("div",{className:"space-y-1.5 md:space-y-2 py-3.5 md:py-5",children:[s.jsx("p",{className:"text-base md:text-lg",children:e.artist_name}),e.played_at?s.jsx("p",{className:"text-base md:text-lg",children:new Date(e.played_at).toLocaleString(void 0,{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}):null,s.jsxs("p",{className:"text-base md:text-lg",children:["Producers:"," ",s.jsx("span",{className:"text-[#A4A4A4]",children:(y=e.producers)!=null&&y.length?e.producers.map((i,C)=>`${i.name}${e.producers.length!==C+1?", ":""}`):"Unknown"})]})]}),s.jsx("div",{className:"flex items-center gap-1 flex-wrap flex-1",children:(M=e.genres)!=null&&M.length?e.genres.map(i=>s.jsx("span",{className:"px-3 py-1 rounded-full text-xs md:text-sm",style:{backgroundColor:"rgba(234, 97, 21, 0.12)"},children:i.name},i.id)):s.jsx("span",{className:"px-3 py-1 rounded-full text-xs md:text-sm text-muted-foreground bg-[rgba(234,97,21,0.12)]",children:"No genre"})}),((e==null?void 0:e.source)==="Apple Music"||(l==null?void 0:l.apple_music_url)||(e==null?void 0:e.apple_music_url))&&s.jsx("button",{id:"appleBtn",className:x("bg-gradient-to-r from-[#FA233B] to-[#FB5C74] hover:from-[#FA233B]/90 hover:to-[#FB5C74]/90 text-white rounded-2xl md:rounded-3xl px-2.5 sm:px-3 py-2 md:py-3.5 mt-5",r==="grid"?"2xl:pr-5 max-w-[calc(100%-10rem)]":"2xl:pr-5 max-w-[calc(100%-6.3rem)]"),children:s.jsxs("a",{href:((A=l==null?void 0:l.attributes)==null?void 0:A.url)||l.apple_music_url||(e==null?void 0:e.apple_music_url)||"#",target:"_blank",rel:"noopener noreferrer",className:"w-full whitespace-nowrap flex relative z-[11] items-center gap-2",children:[s.jsx("img",{src:"/images/Apple_Music_Icon_wht_lg_072420.svg",alt:"Apple Music",className:"w-9 h-9 flex-shrink-0"}),s.jsx("span",{className:"truncate flex-1 text-center font-inter text-[13px] sm:text-base",children:"PLAY ON APPLE MUSIC"})]})}),((e==null?void 0:e.source)==="spotify"||(l==null?void 0:l.spotify_url)||(e==null?void 0:e.spotify_url))&&s.jsx("button",{id:"spotifyBtn",className:x("bg-[#1DB954] hover:bg-[#1DB954]/90 text-white rounded-2xl md:rounded-3xl px-2.5 sm:px-3 py-2 md:py-3.5 mt-5",r==="grid"?"2xl:pr-5 max-w-[calc(100%-10rem)]":"2xl:pr-5 max-w-[calc(100%-6.3rem)]"),children:s.jsxs("a",{href:((E=l==null?void 0:l.attributes)==null?void 0:E.url)||(l==null?void 0:l.spotify_url)||((B=(S=e==null?void 0:e.track_data)==null?void 0:S.external_urls)==null?void 0:B.spotify)||(e==null?void 0:e.spotify_url)||"#",target:"_blank",rel:"noopener noreferrer",className:"w-full whitespace-nowrap flex relative z-[11] items-center gap-2",children:[s.jsx("img",{src:"/images/Spotify_logo_white.svg",alt:"Spotify",className:"w-10 h-10 flex-shrink-0"}),s.jsx("span",{className:"truncate flex-1 text-center font-inter text-[13px] sm:text-base",children:"PLAY ON SPOTIFY"})]})})]})]})}export{O as T};
