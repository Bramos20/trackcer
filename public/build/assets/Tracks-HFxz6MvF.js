import{j as e}from"./ui-UjROl1yU.js";import{a as y,v as z,q as B,$ as E}from"./vendor--ALJc334.js";import{M as W,A as q,S as k}from"./AppLayout-NU6toT8G.js";import{C as I,T as R,b as O,c as N,d as G,e as C}from"./chart-CEddj2vN.js";import{c as a,b as M,B as w}from"./button-Dq94DUpE.js";import{g as T,D as $,P as D,a as U,f as v,b as Y,c as K}from"./popover-BmsIpSUI.js";import{C as V,a as X,b as L,e as S,c as H,d as J}from"./card-1QrzIMt_.js";import{u as Q}from"./use-mobile-D9ClMpbX.js";import{z as Z}from"./app-D0w2CfcE.js";import{A as P,C as ee,X as te,Y as ae,T as se,k as re}from"./charts-BlTULfni.js";import{T as le}from"./trending-up-B3LX85FU.js";import{c as _}from"./createLucideIcon-CiJFG5Iv.js";import{T as ne}from"./TrackCard1-CtGHGYwQ.js";import{C as oe,a as de}from"./chevron-right-CdanDZ7T.js";import{C as A}from"./chevron-down-CU3YUQ5g.js";import"./users-C9iRttU5.js";/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],ce=_("CalendarDays",ie);/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]],me=_("TrendingDown",xe);function pe({listensPerDay:l}){console.log("DailyListenChart received listensPerDay:",l);const i=(l==null?void 0:l.map(n=>({date:new Date(n.date).toLocaleDateString("en-US",{month:"short",day:"numeric"}),fullDate:n.date,listens:n.count})))||[],o={listens:{label:"Songs Listened",color:"var(--chart-1)"}},s=i.slice(-7),d=i.slice(-14,-7),p=s.reduce((n,h)=>n+h.listens,0)/s.length,m=d.length>0?d.reduce((n,h)=>n+h.listens,0)/d.length:p,f=m!==0?((p-m)/m*100).toFixed(1):0,{theme:r}=Z();Q(640);const c=(l==null?void 0:l.reduce((n,h)=>n+h.count,0))||0,u=new Date().toISOString().split("T")[0],x=l==null?void 0:l.find(n=>n.date===u),j=(x==null?void 0:x.count)||0;console.log("=== Debug Info ==="),console.log("listensPerDay:",l),console.log("totalListens:",c),console.log("today:",u),console.log("todayData:",x),console.log("todayListens:",j);const g=c.toString();let t,b;if(g.length===1)t=g,b="";else if(g.length===2)t=g.slice(0,1),b=g.slice(1);else{const n=Math.ceil(g.length/2);t=g.slice(0,n),b=g.slice(n)}return console.log("totalString:",g),console.log("firstPart:",t,"secondPart:",b),e.jsxs(V,{className:"relative w-full rounded-[31.19px] rounded-tr-none lg:rounded-[47px] lg:rounded-tr-none !px-3 md:!px-6 py-2 sm:py-4 mt-20 md:mt-16 lg:-mt-4",children:[e.jsxs(X,{className:"!px-3 md:!px-6 py-3 pb-1 sm:pb-3",children:[e.jsx(L,{className:"text-base sm:text-xl font-medium",children:"Daily Listening Trend"}),e.jsxs(S,{className:"text-sm sm:text-base",children:["Your listening activity over the past ",i.length," days"]})]}),e.jsx(H,{className:"!px-0 !pr-1.5 md:!px-3",children:e.jsx(I,{config:o,className:"h-[300px] w-full",children:e.jsxs(P,{accessibilityLayer:!0,data:i,margin:{top:20,left:-20,right:12},width:void 0,height:void 0,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorListens",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"var(--color-listens)",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"var(--color-listens)",stopOpacity:0})]})}),e.jsx(ee,{vertical:!1,stroke:"rgba(0,0,0,0.1)",className:"stroke-[rgba(0,0,0,0)] dark:stroke-[rgba(255,255,255,0.2)]"}),e.jsx(te,{dataKey:"date",tickLine:!1,axisLine:!1,tickMargin:8,tickFormatter:n=>n}),e.jsx(ae,{tickLine:!1,axisLine:!1,tickMargin:8}),e.jsx(se,{cursor:!1,content:({active:n,payload:h})=>{if(!n||!h||!h.length)return null;const F=h[0].payload;return e.jsx("div",{className:"px-4 md:px-5 py-1 md:py-2 bg-secondary text-white rounded-full",children:e.jsxs("p",{className:"text-sm",children:["Total Plays: ",F.listens]})})}}),e.jsx(re,{type:"monotone",dataKey:"listens",stroke:"var(--color-listens)",strokeWidth:2,fillOpacity:1,fill:"url(#colorListens)"})]})})}),e.jsxs(J,{className:"flex-col items-start gap-2 text-sm py-4",children:[e.jsx(L,{className:"text-base sm:text-xl font-medium",children:e.jsx("div",{className:"flex gap-2",children:Number(f)>0?e.jsxs(e.Fragment,{children:["Trending up by ",Math.abs(Number(f)),"% this week",e.jsx(le,{className:"h-4 w-4"})]}):Number(f)<0?e.jsxs(e.Fragment,{children:["Trending down by ",Math.abs(Number(f)),"% this week",e.jsx(me,{className:"h-4 w-4"})]}):"Stable listening pattern this week"})}),e.jsxs(S,{className:"text-sm sm:text-base",children:["Average of ",e.jsx("span",{className:"bg-[rgb(234,97,21)] text-gray-200 rounded-full px-2",children:p.toFixed(1)})," songs per day this week"]})]}),e.jsx("span",{className:"absolute -top-[70px] sm:-top-[78px] right-0 scale-[0.8] origin-right sm:scale-100",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 280 78",width:"280",height:"78",children:e.jsx("path",{d:"m262 79.8h-262c10.6-0.4 32.2-9.1 34-40.2 1.8-31.2 25.8-39 37.6-39h176c24.3 0 32.4 8.1 32.4 22.5v56.7z",style:{fill:r==="dark"?"#191919":"#F4F4F4",opacity:r==="dark"?.51:.86,backdropFilter:"blur(40px)",WebkitBackdropFilter:"blur(40px)"}})})}),e.jsx("div",{className:"absolute -top-[52px] sm:-top-[65px] right-[35px] sm:right-[83px] flex items-center gap-3 z-[11] origin-right sm:scale-100 max-w-[152px] w-full",children:e.jsxs("div",{className:"relative flex gap-1 justify-between",children:[e.jsx("span",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full p-2 flex justify-center items-center bg-[rgba(255,255,255,0.51)] dark:bg-[#19191950] aspect-square",children:e.jsx(W,{className:"min-w-5 max-h-5 aspect-square text-gray-600 dark:text-gray-400"})}),e.jsxs("div",{className:"text-4xl sm:text-5xl xl:text-[55px] flex-1 flex justify-between",children:[e.jsxs("p",{className:"flex",children:[e.jsx("span",{children:t||"0"})," ",b&&e.jsx("span",{className:"text-neutral-400",children:b})]}),e.jsxs("div",{className:" h-fit flex flex-col pl-1",children:[e.jsxs("div",{className:"px-1 bg-orange-500 rounded-full text-[11px] py-1 inline-block text-white font-normal  w-fit whitespace-nowrap -mt-1",children:["+",j," Today"]}),e.jsx("span",{className:"text-green-500 text-lg mt-1.5",children:"â†‘"})]})]})]})})]})}function ge({className:l,classNames:i,showOutsideDays:o=!0,captionLayout:s="label",buttonVariant:d="ghost",formatters:p,components:m,...f}){const r=T();return e.jsx($,{showOutsideDays:o,className:a("bg-background dark:!bg-[rgb(25,25,25)] group/calendar p-3 [--cell-size:2rem] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent",String.raw`rtl:**:[.rdp-button\_next>svg]:rotate-180`,String.raw`rtl:**:[.rdp-button\_previous>svg]:rotate-180`,l),captionLayout:s,formatters:{formatMonthDropdown:c=>c.toLocaleString("default",{month:"short"}),...p},classNames:{root:a("w-fit",r.root),months:a("flex flex-col sm:flex-row gap-6",r.months),month:a("w-fit min-w-[252px] space-y-2",r.month),nav:a("absolute inset-x-0 top-0 flex w-full items-center justify-between gap-1 mt-4 h-4 px-2 mb-2",r.nav),button_previous:a(M({variant:d}),"h-[--cell-size] w-[--cell-size] select-none p-0 aria-disabled:opacity-50 !h-10",r.button_previous),button_next:a(M({variant:d}),"h-[--cell-size] !h-10 w-[--cell-size] select-none p-0 aria-disabled:opacity-50",r.button_next),month_caption:a("flex h-[--cell-size] w-full items-center justify-center px-[--cell-size]",r.month_caption),caption_label:a("select-none font-medium text-sm",r.caption_label),weekdays:a("flex justify-between px-[--cell-size]",r.weekdays),weekday:a("text-muted-foreground text-center w-[34px] text-[0.8rem] font-normal",r.weekday),table:"w-full table-fixed border-collapse",week:"flex justify-between w-full",day:a("group/day relative aspect-square h-[34px] w-[34px] select-none p-0 text-center",r.day),range_start:a("bg-accent rounded-l-md",r.range_start),range_middle:a("bg-accent rounded-none",r.range_middle),range_end:a("bg-accent rounded-r-md",r.range_end),today:a("rounded-md data-[selected=true]:rounded-none",r.today),outside:a("text-muted-foreground aria-selected:text-muted-foreground",r.outside),disabled:a("text-muted-foreground opacity-50",r.disabled),hidden:a("invisible",r.hidden),...i},components:{Root:({className:c,rootRef:u,...x})=>e.jsx("div",{"data-slot":"calendar",ref:u,className:a(c),...x}),Chevron:({className:c,orientation:u,...x})=>u==="left"?e.jsx(oe,{className:a("size-4",c),...x}):u==="right"?e.jsx(de,{className:a("size-4",c),...x}):e.jsx(A,{className:a("size-4",c),...x}),DayButton:ue,WeekNumber:({children:c,...u})=>e.jsx("td",{...u,children:e.jsx("div",{className:"flex size-[--cell-size] items-center justify-center text-center",children:c})}),...m},...f})}function ue({className:l,day:i,modifiers:o,...s}){const d=T(),p=y.useRef(null);return y.useEffect(()=>{var m;o.focused&&((m=p.current)==null||m.focus())},[o.focused]),e.jsx(w,{ref:p,variant:"ghost",size:"icon","data-day":i.date.toLocaleDateString(),"data-selected-single":o.selected&&!o.range_start&&!o.range_end&&!o.range_middle,"data-range-start":o.range_start,"data-range-end":o.range_end,"data-range-middle":o.range_middle,className:a("data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 flex aspect-square h-auto w-full min-w-[--cell-size] flex-col gap-1 font-normal leading-none data-[range-end=true]:rounded-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] [&>span]:text-xs [&>span]:opacity-70",d.day,l),...s})}function he({className:l,onChange:i,defaultValue:o={from:void 0,to:void 0}}){const[s,d]=y.useState(o),p=m=>{d(m),i&&i(m)};return e.jsx("div",{className:a("grid gap-2",l),children:e.jsxs(D,{children:[e.jsx(U,{asChild:!0,children:e.jsxs("button",{className:a("w-fit max-w-[260px] h-[35px] md:h-[52px] rounded-full  bg-white dark:bg-[rgb(25,25,25)] text-black dark:text-white text-sm font-medium flex items-center justify-between px-2","hover:bg-gray-50 transition-colors duration-150"),children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"dark:bg-[rgb(45,45,45)] bg-[rgb(244,244,244)]  rounded-full aspect-square",children:e.jsx(ce,{className:"h-7 w-7 md:h-9 md:w-9 text-black dark:text-white p-1.5"})}),e.jsx("span",{className:"pr-2",children:s!=null&&s.from?s.to?e.jsxs(e.Fragment,{children:[v(s.from,"MMM d, yy")," -"," ",v(s.to,"MMM d, yy")]}):v(s.from,"MMM d, yy"):"All time"})]}),e.jsx("div",{className:"dark:bg-[rgb(45,45,45)] bg-[rgb(244,244,244)] rounded-full aspect-square",children:e.jsx(A,{className:"h-5 w-5 text-black dark:text-white p-1"})})]})}),e.jsx(Y,{className:"w-auto p-0 bg-white",align:"start",children:e.jsx(ge,{initialFocus:!0,mode:"range",defaultMonth:s==null?void 0:s.from,selected:s,onSelect:p,numberOfMonths:2})})]})})}function ze({tracks:l,auth:i,searchQuery:o,listensPerDay:s}){const[d,p]=y.useState("list"),{get:m,data:f,setData:r}=z({search:o||""}),{url:c}=B(),x=new URLSearchParams(c.split("?")[1]||"").get("track"),[,j]=y.useState({from:void 0,to:void 0});y.useEffect(()=>{if(x&&d==="list"){const t=document.getElementById(`track-${x}`);t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),t.classList.add("ring-2","ring-purple-500","ring-offset-2"),setTimeout(()=>{t.classList.remove("ring-2","ring-purple-500","ring-offset-2")},3e3))}},[x,d]);const g=t=>{t.preventDefault(),m(route("tracks.index"),{preserveState:!1})};return e.jsxs(q,{user:i==null?void 0:i.user,children:[e.jsx(E,{title:"All Tracks"}),e.jsxs("div",{className:"space-y-6 min-h-0",children:[e.jsx("h1",{className:"text-3xl font-normal",children:"All Listened Tracks"}),e.jsxs(R,{value:d,onValueChange:p,children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-6",children:[e.jsxs("div",{className:a("flex flex-col md:flex-row md:items-center justify-between gap-2 w-full z-10",d==="graph"&&(s==null?void 0:s.length)>0?"max-w-[calc(100%)] lg:max-w-[calc(100%-265px)]":"max-w-[calc(100%)]"),children:[e.jsx("div",{className:"overflow-x-auto scrollbar-hide",children:e.jsxs(O,{className:"w-max h-auto p-0.5 bg-white/[0.51] dark:bg-[#191919]/[0.58] rounded-full flex flex-nowrap",children:[e.jsx(N,{value:"list",className:"flex items-center gap-2 px-4 sm:px-6 py-2.5 sm:py-3 rounded-full border-0 data-[state=active]:bg-[#6A4BFB] dark:data-[state=active]:bg-white data-[state=active]:text-white dark:data-[state=active]:text-black text-gray-600 dark:text-gray-400 font-medium text-sm sm:text-base transition-all whitespace-nowrap",children:"Track List"}),e.jsxs(N,{value:"graph",className:"flex items-center gap-2 px-4 sm:px-6 py-2.5 sm:py-3 rounded-full border-0 data-[state=active]:bg-[#6A4BFB] dark:data-[state=active]:bg-white data-[state=active]:text-white dark:data-[state=active]:text-black text-gray-600 dark:text-gray-400 font-medium text-sm sm:text-base transition-all whitespace-nowrap",children:[e.jsx(G,{className:"h-4 w-4"})," Graph"]})]})}),d==="graph"&&e.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[e.jsx(w,{variant:"ghost",size:"icon",className:"bg-[#FFFFFF] dark:bg-[#1A1A1A] text-gray-600 dark:text-gray-400 h-[35px] md:h-[52px] w-[35px] md:w-[52px] rounded-full hover:bg-gray-100 dark:hover:bg-[#252525] hover:text-gray-600",onClick:()=>j({from:void 0,to:void 0}),children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 2v6h-6"}),e.jsx("path",{d:"M3 12a9 9 0 0 1 15-6.7L21 8"}),e.jsx("path",{d:"M3 22v-6h6"}),e.jsx("path",{d:"M21 12a9 9 0 0 1-15 6.7L3 16"})]})}),e.jsx(he,{onChange:t=>{console.log("Selected range:",t),console.log("start",t==null?void 0:t.from,"end",t==null?void 0:t.to)}})]})]}),d==="list"&&e.jsx("div",{className:"hidden lg:block",children:e.jsxs("form",{onSubmit:g,className:"relative flex items-center",children:[e.jsx("input",{type:"text",value:f.search,onChange:t=>r("search",t.target.value),placeholder:"Search by track name, artist, or album...",className:"bg-white/[0.58] dark:bg-[#191919]/[0.58] rounded-full pl-16 pr-32 py-3.5 h-[52px] max-w-[600px] lg:w-[450px] xl:w-[600px] focus:outline-none focus:ring-2 focus:ring-purple-500 placeholder:text-gray-500 dark:placeholder:text-gray-400 text-gray-900 dark:text-white"}),e.jsx("div",{className:"absolute left-2 top-1/2 -translate-y-1/2 w-10 h-10 rounded-full bg-[#E4E4E4] dark:bg-[#1A1A1A] flex items-center justify-center",children:e.jsx(k,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),e.jsx(w,{type:"submit",className:"absolute right-2 top-1/2 -translate-y-1/2 bg-[#6A4BFB] hover:bg-[#6A4BFB]/90 text-white rounded-full px-6 py-2 h-10",children:"Search"})]})})]}),e.jsxs(C,{value:"list",className:"space-y-4",children:[e.jsx("div",{className:"lg:hidden mb-6 flex items-center gap-2",children:e.jsxs("form",{onSubmit:g,className:"relative flex items-center flex-1",children:[e.jsx("input",{type:"text",value:f.search,onChange:t=>r("search",t.target.value),placeholder:"Search by track name, artist, or album...",className:"bg-white/[0.58] dark:bg-[#191919]/[0.58] rounded-full pl-14 pr-4 py-3 h-[48px] w-full focus:outline-none focus:ring-2 focus:ring-purple-500 placeholder:text-gray-500 dark:placeholder:text-gray-400 text-gray-900 dark:text-white"}),e.jsx("div",{className:"absolute left-2 top-1/2 -translate-y-1/2 w-9 h-9 rounded-full bg-[#E4E4E4] dark:bg-[#1A1A1A] flex items-center justify-center",children:e.jsx(k,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})})]})}),l.data.length>0?e.jsx("div",{className:"tracksGrid grid grid-cols-1 md:grid-cols-[repeat(auto-fill,minmax(340px,1fr))] gap-6 mb-20",children:l.data.map((t,b)=>e.jsx(ne,{track:t,layout:"grid",index:b},t.id))}):e.jsx("div",{className:"text-center py-10 text-muted-foreground",children:e.jsx("p",{children:"No tracks found."})}),e.jsx("div",{className:"mt-1",children:e.jsx(K,{meta:l.meta,only:["tracks"]})})]}),e.jsx(C,{value:"graph",className:"space-y-4",children:e.jsx("div",{children:(s==null?void 0:s.length)>0?e.jsx(pe,{listensPerDay:s}):e.jsx("div",{className:"text-muted-foreground text-center p-8",children:e.jsx("p",{children:"No listening data to display."})})})})]})]})]})}export{ze as default};
