import{j as v}from"./ui-UjROl1yU.js";import{m as ee,a as et,$ as nn}from"./vendor--ALJc334.js";import{C as Ut,a as Gt,b as Yt,e as Qt,c as Xt,d as Ee}from"./card-1QrzIMt_.js";import{B as pt}from"./button-Dq94DUpE.js";import{C as Ce,a as Te,f as rn,T as an,b as sn,c as wt,d as on,e as _t}from"./chart-CEddj2vN.js";import{A as ln}from"./AppLayout-NU6toT8G.js";import{S as un,a as cn,C as fn,b as hn,c as dn,d as at}from"./select-BTvP7yGw.js";import{S as bt}from"./StatCard-C_882TU4.js";import{T as pn}from"./TrackCard1-CtGHGYwQ.js";import{B as mn,P as gn}from"./ProducerCard-DozX3UfH.js";import{R as yn,P as vn,b as xn,c as wn,i as _n,d as fe,e as bn,f as he,g as Nn,h as jn,j as An,B as kn,C as Sn,X as En,Y as Cn,a as Tn}from"./charts-BlTULfni.js";import{z as Fn}from"./app-D0w2CfcE.js";import{c as ne}from"./createLucideIcon-CiJFG5Iv.js";import{U as Mn}from"./users-C9iRttU5.js";import"./chevron-down-CU3YUQ5g.js";import"./check-BrIydDWP.js";import"./use-mobile-D9ClMpbX.js";import"./trending-up-B3LX85FU.js";import"./move-up-right-zbuB2Ihi.js";/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],zn=ne("ChartPie",On);/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=[["path",{d:"m15 15 6 6",key:"1s409w"}],["path",{d:"m15 9 6-6",key:"ko1vev"}],["path",{d:"M21 16.2V21h-4.8",key:"1hrera"}],["path",{d:"M21 7.8V3h-4.8",key:"ul1q53"}],["path",{d:"M3 16.2V21h4.8",key:"1x04uo"}],["path",{d:"m3 21 6-6",key:"wwnumi"}],["path",{d:"M3 7.8V3h4.8",key:"1ijppm"}],["path",{d:"M9 9 3 3",key:"v551iv"}]],Bn=ne("Expand",$n);/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Pn=ne("History",Dn);var Dt,de;function re(){if(de)return Dt;de=1;var t=String.prototype.replace,e=/%20/g,n={RFC1738:"RFC1738",RFC3986:"RFC3986"};return Dt={default:n.RFC3986,formatters:{RFC1738:function(r){return t.call(r,e,"+")},RFC3986:function(r){return String(r)}},RFC1738:n.RFC1738,RFC3986:n.RFC3986},Dt}var Pt,pe;function Fe(){if(pe)return Pt;pe=1;var t=re(),e=Object.prototype.hasOwnProperty,n=Array.isArray,r=function(){for(var c=[],l=0;l<256;++l)c.push("%"+((l<16?"0":"")+l.toString(16)).toUpperCase());return c}(),i=function(l){for(;l.length>1;){var u=l.pop(),m=u.obj[u.prop];if(n(m)){for(var _=[],d=0;d<m.length;++d)typeof m[d]<"u"&&_.push(m[d]);u.obj[u.prop]=_}}},a=function(l,u){for(var m=u&&u.plainObjects?Object.create(null):{},_=0;_<l.length;++_)typeof l[_]<"u"&&(m[_]=l[_]);return m},s=function c(l,u,m){if(!u)return l;if(typeof u!="object"){if(n(l))l.push(u);else if(l&&typeof l=="object")(m&&(m.plainObjects||m.allowPrototypes)||!e.call(Object.prototype,u))&&(l[u]=!0);else return[l,u];return l}if(!l||typeof l!="object")return[l].concat(u);var _=l;return n(l)&&!n(u)&&(_=a(l,m)),n(l)&&n(u)?(u.forEach(function(d,b){if(e.call(l,b)){var A=l[b];A&&typeof A=="object"&&d&&typeof d=="object"?l[b]=c(A,d,m):l.push(d)}else l[b]=d}),l):Object.keys(u).reduce(function(d,b){var A=u[b];return e.call(d,b)?d[b]=c(d[b],A,m):d[b]=A,d},_)},o=function(l,u){return Object.keys(u).reduce(function(m,_){return m[_]=u[_],m},l)},f=function(c,l,u){var m=c.replace(/\+/g," ");if(u==="iso-8859-1")return m.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(m)}catch{return m}},p=function(l,u,m,_,d){if(l.length===0)return l;var b=l;if(typeof l=="symbol"?b=Symbol.prototype.toString.call(l):typeof l!="string"&&(b=String(l)),m==="iso-8859-1")return escape(b).replace(/%u[0-9a-f]{4}/gi,function(O){return"%26%23"+parseInt(O.slice(2),16)+"%3B"});for(var A="",C=0;C<b.length;++C){var k=b.charCodeAt(C);if(k===45||k===46||k===95||k===126||k>=48&&k<=57||k>=65&&k<=90||k>=97&&k<=122||d===t.RFC1738&&(k===40||k===41)){A+=b.charAt(C);continue}if(k<128){A=A+r[k];continue}if(k<2048){A=A+(r[192|k>>6]+r[128|k&63]);continue}if(k<55296||k>=57344){A=A+(r[224|k>>12]+r[128|k>>6&63]+r[128|k&63]);continue}C+=1,k=65536+((k&1023)<<10|b.charCodeAt(C)&1023),A+=r[240|k>>18]+r[128|k>>12&63]+r[128|k>>6&63]+r[128|k&63]}return A},g=function(l){for(var u=[{obj:{o:l},prop:"o"}],m=[],_=0;_<u.length;++_)for(var d=u[_],b=d.obj[d.prop],A=Object.keys(b),C=0;C<A.length;++C){var k=A[C],O=b[k];typeof O=="object"&&O!==null&&m.indexOf(O)===-1&&(u.push({obj:b,prop:k}),m.push(O))}return i(u),l},N=function(l){return Object.prototype.toString.call(l)==="[object RegExp]"},x=function(l){return!l||typeof l!="object"?!1:!!(l.constructor&&l.constructor.isBuffer&&l.constructor.isBuffer(l))},h=function(l,u){return[].concat(l,u)},w=function(l,u){if(n(l)){for(var m=[],_=0;_<l.length;_+=1)m.push(u(l[_]));return m}return u(l)};return Pt={arrayToObject:a,assign:o,combine:h,compact:g,decode:f,encode:p,isBuffer:x,isRegExp:N,maybeMap:w,merge:s},Pt}var Lt,me;function Ln(){if(me)return Lt;me=1;var t=Fe(),e=re(),n=Object.prototype.hasOwnProperty,r={brackets:function(c){return c+"[]"},comma:"comma",indices:function(c,l){return c+"["+l+"]"},repeat:function(c){return c}},i=Array.isArray,a=String.prototype.split,s=Array.prototype.push,o=function(w,c){s.apply(w,i(c)?c:[c])},f=Date.prototype.toISOString,p=e.default,g={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:t.encode,encodeValuesOnly:!1,format:p,formatter:e.formatters[p],indices:!1,serializeDate:function(c){return f.call(c)},skipNulls:!1,strictNullHandling:!1},N=function(c){return typeof c=="string"||typeof c=="number"||typeof c=="boolean"||typeof c=="symbol"||typeof c=="bigint"},x=function w(c,l,u,m,_,d,b,A,C,k,O,$,L,B){var T=c;if(typeof b=="function"?T=b(l,T):T instanceof Date?T=k(T):u==="comma"&&i(T)&&(T=t.maybeMap(T,function(I){return I instanceof Date?k(I):I})),T===null){if(m)return d&&!L?d(l,g.encoder,B,"key",O):l;T=""}if(N(T)||t.isBuffer(T)){if(d){var y=L?l:d(l,g.encoder,B,"key",O);if(u==="comma"&&L){for(var S=a.call(String(T),","),j="",E=0;E<S.length;++E)j+=(E===0?"":",")+$(d(S[E],g.encoder,B,"value",O));return[$(y)+"="+j]}return[$(y)+"="+$(d(T,g.encoder,B,"value",O))]}return[$(l)+"="+$(String(T))]}var F=[];if(typeof T>"u")return F;var M;if(u==="comma"&&i(T))M=[{value:T.length>0?T.join(",")||null:void 0}];else if(i(b))M=b;else{var z=Object.keys(T);M=A?z.sort(A):z}for(var D=0;D<M.length;++D){var P=M[D],H=typeof P=="object"&&typeof P.value<"u"?P.value:T[P];if(!(_&&H===null)){var R=i(T)?typeof u=="function"?u(l,P):l:l+(C?"."+P:"["+P+"]");o(F,w(H,R,u,m,_,d,b,A,C,k,O,$,L,B))}}return F},h=function(c){if(!c)return g;if(c.encoder!==null&&typeof c.encoder<"u"&&typeof c.encoder!="function")throw new TypeError("Encoder has to be a function.");var l=c.charset||g.charset;if(typeof c.charset<"u"&&c.charset!=="utf-8"&&c.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var u=e.default;if(typeof c.format<"u"){if(!n.call(e.formatters,c.format))throw new TypeError("Unknown format option provided.");u=c.format}var m=e.formatters[u],_=g.filter;return(typeof c.filter=="function"||i(c.filter))&&(_=c.filter),{addQueryPrefix:typeof c.addQueryPrefix=="boolean"?c.addQueryPrefix:g.addQueryPrefix,allowDots:typeof c.allowDots>"u"?g.allowDots:!!c.allowDots,charset:l,charsetSentinel:typeof c.charsetSentinel=="boolean"?c.charsetSentinel:g.charsetSentinel,delimiter:typeof c.delimiter>"u"?g.delimiter:c.delimiter,encode:typeof c.encode=="boolean"?c.encode:g.encode,encoder:typeof c.encoder=="function"?c.encoder:g.encoder,encodeValuesOnly:typeof c.encodeValuesOnly=="boolean"?c.encodeValuesOnly:g.encodeValuesOnly,filter:_,format:u,formatter:m,serializeDate:typeof c.serializeDate=="function"?c.serializeDate:g.serializeDate,skipNulls:typeof c.skipNulls=="boolean"?c.skipNulls:g.skipNulls,sort:typeof c.sort=="function"?c.sort:null,strictNullHandling:typeof c.strictNullHandling=="boolean"?c.strictNullHandling:g.strictNullHandling}};return Lt=function(w,c){var l=w,u=h(c),m,_;typeof u.filter=="function"?(_=u.filter,l=_("",l)):i(u.filter)&&(_=u.filter,m=_);var d=[];if(typeof l!="object"||l===null)return"";var b;c&&c.arrayFormat in r?b=c.arrayFormat:c&&"indices"in c?b=c.indices?"indices":"repeat":b="indices";var A=r[b];m||(m=Object.keys(l)),u.sort&&m.sort(u.sort);for(var C=0;C<m.length;++C){var k=m[C];u.skipNulls&&l[k]===null||o(d,x(l[k],k,A,u.strictNullHandling,u.skipNulls,u.encode?u.encoder:null,u.filter,u.sort,u.allowDots,u.serializeDate,u.format,u.formatter,u.encodeValuesOnly,u.charset))}var O=d.join(u.delimiter),$=u.addQueryPrefix===!0?"?":"";return u.charsetSentinel&&(u.charset==="iso-8859-1"?$+="utf8=%26%2310003%3B&":$+="utf8=%E2%9C%93&"),O.length>0?$+O:""},Lt}var Rt,ge;function Rn(){if(ge)return Rt;ge=1;var t=Fe(),e=Object.prototype.hasOwnProperty,n=Array.isArray,r={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:t.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},i=function(x){return x.replace(/&#(\d+);/g,function(h,w){return String.fromCharCode(parseInt(w,10))})},a=function(x,h){return x&&typeof x=="string"&&h.comma&&x.indexOf(",")>-1?x.split(","):x},s="utf8=%26%2310003%3B",o="utf8=%E2%9C%93",f=function(h,w){var c={},l=w.ignoreQueryPrefix?h.replace(/^\?/,""):h,u=w.parameterLimit===1/0?void 0:w.parameterLimit,m=l.split(w.delimiter,u),_=-1,d,b=w.charset;if(w.charsetSentinel)for(d=0;d<m.length;++d)m[d].indexOf("utf8=")===0&&(m[d]===o?b="utf-8":m[d]===s&&(b="iso-8859-1"),_=d,d=m.length);for(d=0;d<m.length;++d)if(d!==_){var A=m[d],C=A.indexOf("]="),k=C===-1?A.indexOf("="):C+1,O,$;k===-1?(O=w.decoder(A,r.decoder,b,"key"),$=w.strictNullHandling?null:""):(O=w.decoder(A.slice(0,k),r.decoder,b,"key"),$=t.maybeMap(a(A.slice(k+1),w),function(L){return w.decoder(L,r.decoder,b,"value")})),$&&w.interpretNumericEntities&&b==="iso-8859-1"&&($=i($)),A.indexOf("[]=")>-1&&($=n($)?[$]:$),e.call(c,O)?c[O]=t.combine(c[O],$):c[O]=$}return c},p=function(x,h,w,c){for(var l=c?h:a(h,w),u=x.length-1;u>=0;--u){var m,_=x[u];if(_==="[]"&&w.parseArrays)m=[].concat(l);else{m=w.plainObjects?Object.create(null):{};var d=_.charAt(0)==="["&&_.charAt(_.length-1)==="]"?_.slice(1,-1):_,b=parseInt(d,10);!w.parseArrays&&d===""?m={0:l}:!isNaN(b)&&_!==d&&String(b)===d&&b>=0&&w.parseArrays&&b<=w.arrayLimit?(m=[],m[b]=l):d!=="__proto__"&&(m[d]=l)}l=m}return l},g=function(h,w,c,l){if(h){var u=c.allowDots?h.replace(/\.([^.[]+)/g,"[$1]"):h,m=/(\[[^[\]]*])/,_=/(\[[^[\]]*])/g,d=c.depth>0&&m.exec(u),b=d?u.slice(0,d.index):u,A=[];if(b){if(!c.plainObjects&&e.call(Object.prototype,b)&&!c.allowPrototypes)return;A.push(b)}for(var C=0;c.depth>0&&(d=_.exec(u))!==null&&C<c.depth;){if(C+=1,!c.plainObjects&&e.call(Object.prototype,d[1].slice(1,-1))&&!c.allowPrototypes)return;A.push(d[1])}return d&&A.push("["+u.slice(d.index)+"]"),p(A,w,c,l)}},N=function(h){if(!h)return r;if(h.decoder!==null&&h.decoder!==void 0&&typeof h.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof h.charset<"u"&&h.charset!=="utf-8"&&h.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var w=typeof h.charset>"u"?r.charset:h.charset;return{allowDots:typeof h.allowDots>"u"?r.allowDots:!!h.allowDots,allowPrototypes:typeof h.allowPrototypes=="boolean"?h.allowPrototypes:r.allowPrototypes,arrayLimit:typeof h.arrayLimit=="number"?h.arrayLimit:r.arrayLimit,charset:w,charsetSentinel:typeof h.charsetSentinel=="boolean"?h.charsetSentinel:r.charsetSentinel,comma:typeof h.comma=="boolean"?h.comma:r.comma,decoder:typeof h.decoder=="function"?h.decoder:r.decoder,delimiter:typeof h.delimiter=="string"||t.isRegExp(h.delimiter)?h.delimiter:r.delimiter,depth:typeof h.depth=="number"||h.depth===!1?+h.depth:r.depth,ignoreQueryPrefix:h.ignoreQueryPrefix===!0,interpretNumericEntities:typeof h.interpretNumericEntities=="boolean"?h.interpretNumericEntities:r.interpretNumericEntities,parameterLimit:typeof h.parameterLimit=="number"?h.parameterLimit:r.parameterLimit,parseArrays:h.parseArrays!==!1,plainObjects:typeof h.plainObjects=="boolean"?h.plainObjects:r.plainObjects,strictNullHandling:typeof h.strictNullHandling=="boolean"?h.strictNullHandling:r.strictNullHandling}};return Rt=function(x,h){var w=N(h);if(x===""||x===null||typeof x>"u")return w.plainObjects?Object.create(null):{};for(var c=typeof x=="string"?f(x,w):x,l=w.plainObjects?Object.create(null):{},u=Object.keys(c),m=0;m<u.length;++m){var _=u[m],d=g(_,c[_],w,typeof x=="string");l=t.merge(l,d,w)}return t.compact(l)},Rt}var It,ye;function In(){if(ye)return It;ye=1;var t=Ln(),e=Rn(),n=re();return It={formats:n,parse:e,stringify:t},It}var Me=In();function U(){return U=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},U.apply(null,arguments)}class qt{constructor(e,n,r){var i,a;this.name=e,this.definition=n,this.bindings=(i=n.bindings)!=null?i:{},this.wheres=(a=n.wheres)!=null?a:{},this.config=r}get template(){const e=`${this.origin}/${this.definition.uri}`.replace(/\/+$/,"");return e===""?"/":e}get origin(){return this.config.absolute?this.definition.domain?`${this.config.url.match(/^\w+:\/\//)[0]}${this.definition.domain}${this.config.port?`:${this.config.port}`:""}`:this.config.url:""}get parameterSegments(){var e,n;return(e=(n=this.template.match(/{[^}?]+\??}/g))==null?void 0:n.map(r=>({name:r.replace(/{|\??}/g,""),required:!/\?}$/.test(r)})))!=null?e:[]}matchesUrl(e){var n;if(!this.definition.methods.includes("GET"))return!1;const r=this.template.replace(/[.*+$()[\]]/g,"\\$&").replace(/(\/?){([^}?]*)(\??)}/g,(o,f,p,g)=>{var N;const x=`(?<${p}>${((N=this.wheres[p])==null?void 0:N.replace(/(^\^)|(\$$)/g,""))||"[^/?]+"})`;return g?`(${f}${x})?`:`${f}${x}`}).replace(/^\w+:\/\//,""),[i,a]=e.replace(/^\w+:\/\//,"").split("?"),s=(n=new RegExp(`^${r}/?$`).exec(i))!=null?n:new RegExp(`^${r}/?$`).exec(decodeURI(i));if(s){for(const o in s.groups)s.groups[o]=typeof s.groups[o]=="string"?decodeURIComponent(s.groups[o]):s.groups[o];return{params:s.groups,query:Me.parse(a)}}return!1}compile(e){return this.parameterSegments.length?this.template.replace(/{([^}?]+)(\??)}/g,(n,r,i)=>{var a,s;if(!i&&[null,void 0].includes(e[r]))throw new Error(`Ziggy error: '${r}' parameter is required for route '${this.name}'.`);if(this.wheres[r]&&!new RegExp(`^${i?`(${this.wheres[r]})?`:this.wheres[r]}$`).test((s=e[r])!=null?s:""))throw new Error(`Ziggy error: '${r}' parameter '${e[r]}' does not match required format '${this.wheres[r]}' for route '${this.name}'.`);return encodeURI((a=e[r])!=null?a:"").replace(/%7C/g,"|").replace(/%25/g,"%").replace(/\$/g,"%24")}).replace(this.config.absolute?/(\.[^/]+?)(\/\/)/:/(^)(\/\/)/,"$1/").replace(/\/+$/,""):this.template}}class qn extends String{constructor(e,n,r=!0,i){if(super(),this.t=i??(typeof Ziggy<"u"?Ziggy:globalThis==null?void 0:globalThis.Ziggy),this.t=U({},this.t,{absolute:r}),e){if(!this.t.routes[e])throw new Error(`Ziggy error: route '${e}' is not in the route list.`);this.i=new qt(e,this.t.routes[e],this.t),this.o=this.u(n)}}toString(){const e=Object.keys(this.o).filter(n=>!this.i.parameterSegments.some(({name:r})=>r===n)).filter(n=>n!=="_query").reduce((n,r)=>U({},n,{[r]:this.o[r]}),{});return this.i.compile(this.o)+Me.stringify(U({},e,this.o._query),{addQueryPrefix:!0,arrayFormat:"indices",encodeValuesOnly:!0,skipNulls:!0,encoder:(n,r)=>typeof n=="boolean"?Number(n):r(n)})}h(e){e?this.t.absolute&&e.startsWith("/")&&(e=this.l().host+e):e=this.m();let n={};const[r,i]=Object.entries(this.t.routes).find(([a,s])=>n=new qt(a,s,this.t).matchesUrl(e))||[void 0,void 0];return U({name:r},n,{route:i})}m(){const{host:e,pathname:n,search:r}=this.l();return(this.t.absolute?e+n:n.replace(this.t.url.replace(/^\w*:\/\/[^/]+/,""),"").replace(/^\/+/,"/"))+r}current(e,n){const{name:r,params:i,query:a,route:s}=this.h();if(!e)return r;const o=new RegExp(`^${e.replace(/\./g,"\\.").replace(/\*/g,".*")}$`).test(r);if([null,void 0].includes(n)||!o)return o;const f=new qt(r,s,this.t);n=this.u(n,f);const p=U({},i,a);if(Object.values(n).every(N=>!N)&&!Object.values(p).some(N=>N!==void 0))return!0;const g=(N,x)=>Object.entries(N).every(([h,w])=>Array.isArray(w)&&Array.isArray(x[h])?w.every(c=>x[h].includes(c)):typeof w=="object"&&typeof x[h]=="object"&&w!==null&&x[h]!==null?g(w,x[h]):x[h]==w);return g(n,p)}l(){var e,n,r,i,a,s;const{host:o="",pathname:f="",search:p=""}=typeof window<"u"?window.location:{};return{host:(e=(n=this.t.location)==null?void 0:n.host)!=null?e:o,pathname:(r=(i=this.t.location)==null?void 0:i.pathname)!=null?r:f,search:(a=(s=this.t.location)==null?void 0:s.search)!=null?a:p}}get params(){const{params:e,query:n}=this.h();return U({},e,n)}get routeParams(){return this.h().params}get queryParams(){return this.h().query}has(e){return this.t.routes.hasOwnProperty(e)}u(e={},n=this.i){e!=null||(e={}),e=["string","number"].includes(typeof e)?[e]:e;const r=n.parameterSegments.filter(({name:i})=>!this.t.defaults[i]);return Array.isArray(e)?e=e.reduce((i,a,s)=>U({},i,r[s]?{[r[s].name]:a}:typeof a=="object"?a:{[a]:""}),{}):r.length!==1||e[r[0].name]||!e.hasOwnProperty(Object.values(n.bindings)[0])&&!e.hasOwnProperty("id")||(e={[r[0].name]:e}),U({},this.$(n),this.p(e,n))}$(e){return e.parameterSegments.filter(({name:n})=>this.t.defaults[n]).reduce((n,{name:r},i)=>U({},n,{[r]:this.t.defaults[r]}),{})}p(e,{bindings:n,parameterSegments:r}){return Object.entries(e).reduce((i,[a,s])=>{if(!s||typeof s!="object"||Array.isArray(s)||!r.some(({name:o})=>o===a))return U({},i,{[a]:s});if(!s.hasOwnProperty(n[a])){if(!s.hasOwnProperty("id"))throw new Error(`Ziggy error: object passed as '${a}' parameter is missing route model binding key '${n[a]}'.`);n[a]="id"}return U({},i,{[a]:s[n[a]]})},{})}valueOf(){return this.toString()}}function Vn(t,e,n,r){const i=new qn(t,e,n,r);return t?i.toString():i}const Hn=({timeframe:t})=>{const e=n=>{ee.visit(Vn("dashboard"),{method:"get",data:{timeframe:n},preserveScroll:!0,preserveState:!1})};return v.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[v.jsxs("div",{children:[v.jsx("h1",{className:"text-3xl lg:text-5xl lg:mb-1 font-normal",children:"Music Analytics"}),v.jsx("p",{className:"lg:text-lg text-muted-foreground",children:"Your listening statistics and producer insights"})]}),v.jsx("div",{className:"flex items-center gap-2",children:v.jsx("div",{className:"p-0.5 bg-white/[0.51] dark:bg-[#191919]/[0.58] rounded-full",children:v.jsxs(un,{defaultValue:t||"all",onValueChange:e,children:[v.jsxs(cn,{className:"h-auto py-3 sm:py-5.5 px-4 sm:px-6 w-55 bg-transparent border-0 rounded-full text-sm sm:text-base font-medium",children:[v.jsx(fn,{className:"h-4 w-4 mr-2 text-gray-600 dark:text-gray-400"}),v.jsx(hn,{placeholder:"Select period"})]}),v.jsxs(dn,{className:"bg-white/[0.51] dark:bg-[#191919]/[0.58] backdrop-blur-md rounded-2xl border-0 p-2",children:[v.jsx(at,{value:"today",className:"rounded-sm data-[state=checked]:bg-[#6A4BFB] data-[state=checked]:text-white mb-1",children:"Today"}),v.jsx(at,{value:"last_2_days",className:"rounded-sm data-[state=checked]:bg-[#6A4BFB] data-[state=checked]:text-white mb-1",children:"Last 2 Days"}),v.jsx(at,{value:"last_week",className:"rounded-sm data-[state=checked]:bg-[#6A4BFB] data-[state=checked]:text-white mb-1",children:"Last Week"}),v.jsx(at,{value:"last_month",className:"rounded-sm data-[state=checked]:bg-[#6A4BFB] data-[state=checked]:text-white mb-1",children:"Last Month"}),v.jsx(at,{value:"last_year",className:"rounded-sm data-[state=checked]:bg-[#6A4BFB] data-[state=checked]:text-white mb-1",children:"Last Year"}),v.jsx(at,{value:"all",className:"rounded-sm data-[state=checked]:bg-[#6A4BFB] data-[state=checked]:text-white",children:"All Time"})]})]})})})]})};function Un({history:t}){return!t||t.length===0?v.jsx("div",{className:"w-full flex items-center justify-center h-64",children:v.jsx("p",{className:"text-muted-foreground",children:"No recent listening history"})}):v.jsxs("div",{className:"w-full",children:[v.jsx("div",{className:"mb-6",children:v.jsx("h2",{className:"text-lg sm:text-2xl",children:"Recent Listening History"})}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-[repeat(auto-fill,minmax(340px,1fr))] gap-6 pb-4",children:t.slice(0,10).map((e,n)=>v.jsx(pn,{track:e,layout:"grid"},n))}),v.jsx("div",{className:"flex justify-end sm:justify-end items-center mt-6 sm:mt-10 relative z-10",children:v.jsx(pt,{onClick:()=>ee.visit("/tracks"),className:"bg-primary hover:bg-primary/90 text-primary-foreground font-medium text-sm tracking-wide flex items-center justify-center cursor-pointer",style:{backgroundColor:"#6A4BFB",width:"220px",height:"55px",borderRadius:"22px"},children:"LOAD MORE"})})]})}function Gn({genreNames:t=[],genreCounts:e=[]}){const n=Math.max(...e),r=["#EA6115","#261A59","#4531A4","#6A4BFB","#F19436"],i=t.map((o,f)=>({genre:o,count:e[f]||0,fill:r[f%r.length]})),a={count:{label:"Tracks"},...t.reduce((o,f,p)=>(o[f]={label:f,color:r[p%r.length]},o),{})},s=(o,f)=>t.slice(o,f).map((p,g)=>{const N=o+g,x=e[N]||0,h=(x/n*100).toFixed(2),w=r[N%r.length];return v.jsxs("div",{className:"mb-4",children:[v.jsx("div",{className:"flex justify-between items-center mb-1",children:v.jsx("span",{className:"text-sm sm:text-base font-medium",children:p})}),v.jsxs("div",{className:"relative w-full h-[17.87px] sm:h-[31px]",children:[v.jsx("div",{className:"absolute inset-0 bg-[#AEAEAE]/10 dark:bg-white/10 rounded-[5.93px] sm:rounded-[10px]"}),v.jsx("div",{className:"absolute top-0 left-0 h-full rounded-[5.93px] sm:rounded-[10px] flex items-center justify-end pr-2 sm:pr-3",style:{width:`${Math.max(parseFloat(h),20)}%`,backgroundColor:w,backgroundImage:`repeating-linear-gradient(
                                    20deg,
                                    transparent,
                                    transparent 8px,
                                    rgba(255, 255, 255, 0.15) 8px,
                                    rgba(255, 255, 255, 0.15) 12px
                                )`},children:v.jsxs("span",{className:"text-white text-xs sm:text-sm font-medium",children:[x," tracks"]})})]})]},N)});return v.jsxs(Ut,{className:"rounded-[31.19px] lg:rounded-[47px] pl-3 sm:pl-6 pr-0 sm:pr-2 py-2 sm:py-4",children:[v.jsx(Gt,{className:"pl-6 pr-6 py-3 pb-0 sm:pb-0",children:v.jsxs("div",{children:[v.jsx(Yt,{className:"text-base sm:text-xl font-medium",children:"Genre Distribution"}),v.jsx(Qt,{className:"text-sm sm:text-base",children:"Your most listened to music genres"})]})}),v.jsxs(Xt,{className:"pl-0 pr-0 py-0",children:[i.length===0&&v.jsx("div",{className:"text-center py-10 text-muted-foreground",children:v.jsx("p",{children:"No genre data available."})}),v.jsxs("div",{className:"flex flex-col md:grid md:grid-cols-12 gap-4",children:[v.jsx("div",{className:"order-2 md:order-1 pl-6 pr-6 md:pr-0 md:col-span-7",children:v.jsx("div",{className:"space-y-3",children:s(0,t.length)})}),v.jsx("div",{className:"order-1 md:order-2 flex justify-center md:justify-end items-center relative md:-mr-4 md:col-span-5",children:i.length>0&&v.jsxs(v.Fragment,{children:[v.jsx(Ce,{config:a,className:"mx-auto md:mx-0 aspect-square h-[300px] sm:h-[350px] md:h-[420px] w-full",children:v.jsx(yn,{width:"100%",height:"100%",children:v.jsxs(vn,{children:[v.jsx(Te,{cursor:!1,content:v.jsx(rn,{hideLabel:!0})}),v.jsx(xn,{data:i,dataKey:"count",nameKey:"genre",innerRadius:"53%",outerRadius:"85%",paddingAngle:1.2,cornerRadius:4,children:i.map((o,f)=>v.jsx(wn,{fill:o.fill},`cell-${f}`))})]})})}),v.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:v.jsxs(mn,{variant:"secondary",className:"bg-[#EA6115] text-white border-0 text-xs sm:text-sm font-medium flex items-center justify-center w-[85px] sm:w-[105px] h-[25px] sm:h-[32px]",style:{borderRadius:"81.97px"},children:[t.length," Genres"]})})]})})]})]}),v.jsx(Ee,{className:"flex justify-right pl-6 pr-6 py-1",children:i.length>0?v.jsx(pt,{className:"bg-[#6A4BFB] text-white rounded-[14.6px] md:rounded-[22px] hover:bg-[#5A3BEB] w-[155px] h-[40px] md:w-[220px] md:h-[55px] text-xs md:text-sm",children:"VIEW ALL GENRES"}):""})]})}var Yn={value:()=>{}};function vt(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new At(n)}function At(t){this._=t}function Qn(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}At.prototype=vt.prototype={constructor:At,on:function(t,e){var n=this._,r=Qn(t+"",n),i,a=-1,s=r.length;if(arguments.length<2){for(;++a<s;)if((i=(t=r[a]).type)&&(i=Xn(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<s;)if(i=(t=r[a]).type)n[i]=ve(n[i],t.name,e);else if(e==null)for(i in n)n[i]=ve(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new At(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function Xn(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function ve(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Yn,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Wt="http://www.w3.org/1999/xhtml";const xe={svg:"http://www.w3.org/2000/svg",xhtml:Wt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ot(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),xe.hasOwnProperty(e)?{space:xe[e],local:t}:t}function Wn(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Wt&&e.documentElement.namespaceURI===Wt?e.createElement(t):e.createElementNS(n,t)}}function Kn(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Oe(t){var e=Ot(t);return(e.local?Kn:Wn)(e)}function Zn(){}function ie(t){return t==null?Zn:function(){return this.querySelector(t)}}function Jn(t){typeof t!="function"&&(t=ie(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],s=a.length,o=r[i]=new Array(s),f,p,g=0;g<s;++g)(f=a[g])&&(p=t.call(f,f.__data__,g,a))&&("__data__"in f&&(p.__data__=f.__data__),o[g]=p);return new G(r,this._parents)}function tr(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function er(){return[]}function ze(t){return t==null?er:function(){return this.querySelectorAll(t)}}function nr(t){return function(){return tr(t.apply(this,arguments))}}function rr(t){typeof t=="function"?t=nr(t):t=ze(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var s=e[a],o=s.length,f,p=0;p<o;++p)(f=s[p])&&(r.push(t.call(f,f.__data__,p,s)),i.push(f));return new G(r,i)}function $e(t){return function(){return this.matches(t)}}function Be(t){return function(e){return e.matches(t)}}var ir=Array.prototype.find;function ar(t){return function(){return ir.call(this.children,t)}}function sr(){return this.firstElementChild}function or(t){return this.select(t==null?sr:ar(typeof t=="function"?t:Be(t)))}var lr=Array.prototype.filter;function ur(){return Array.from(this.children)}function cr(t){return function(){return lr.call(this.children,t)}}function fr(t){return this.selectAll(t==null?ur:cr(typeof t=="function"?t:Be(t)))}function hr(t){typeof t!="function"&&(t=$e(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],s=a.length,o=r[i]=[],f,p=0;p<s;++p)(f=a[p])&&t.call(f,f.__data__,p,a)&&o.push(f);return new G(r,this._parents)}function De(t){return new Array(t.length)}function dr(){return new G(this._enter||this._groups.map(De),this._parents)}function Ct(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Ct.prototype={constructor:Ct,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function pr(t){return function(){return t}}function mr(t,e,n,r,i,a){for(var s=0,o,f=e.length,p=a.length;s<p;++s)(o=e[s])?(o.__data__=a[s],r[s]=o):n[s]=new Ct(t,a[s]);for(;s<f;++s)(o=e[s])&&(i[s]=o)}function gr(t,e,n,r,i,a,s){var o,f,p=new Map,g=e.length,N=a.length,x=new Array(g),h;for(o=0;o<g;++o)(f=e[o])&&(x[o]=h=s.call(f,f.__data__,o,e)+"",p.has(h)?i[o]=f:p.set(h,f));for(o=0;o<N;++o)h=s.call(t,a[o],o,a)+"",(f=p.get(h))?(r[o]=f,f.__data__=a[o],p.delete(h)):n[o]=new Ct(t,a[o]);for(o=0;o<g;++o)(f=e[o])&&p.get(x[o])===f&&(i[o]=f)}function yr(t){return t.__data__}function vr(t,e){if(!arguments.length)return Array.from(this,yr);var n=e?gr:mr,r=this._parents,i=this._groups;typeof t!="function"&&(t=pr(t));for(var a=i.length,s=new Array(a),o=new Array(a),f=new Array(a),p=0;p<a;++p){var g=r[p],N=i[p],x=N.length,h=xr(t.call(g,g&&g.__data__,p,r)),w=h.length,c=o[p]=new Array(w),l=s[p]=new Array(w),u=f[p]=new Array(x);n(g,N,c,l,u,h,e);for(var m=0,_=0,d,b;m<w;++m)if(d=c[m]){for(m>=_&&(_=m+1);!(b=l[_])&&++_<w;);d._next=b||null}}return s=new G(s,r),s._enter=o,s._exit=f,s}function xr(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function wr(){return new G(this._exit||this._groups.map(De),this._parents)}function _r(t,e,n){var r=this.enter(),i=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function br(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,s=Math.min(i,a),o=new Array(i),f=0;f<s;++f)for(var p=n[f],g=r[f],N=p.length,x=o[f]=new Array(N),h,w=0;w<N;++w)(h=p[w]||g[w])&&(x[w]=h);for(;f<i;++f)o[f]=n[f];return new G(o,this._parents)}function Nr(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],s;--i>=0;)(s=r[i])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}function jr(t){t||(t=Ar);function e(N,x){return N&&x?t(N.__data__,x.__data__):!N-!x}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var s=n[a],o=s.length,f=i[a]=new Array(o),p,g=0;g<o;++g)(p=s[g])&&(f[g]=p);f.sort(e)}return new G(i,this._parents).order()}function Ar(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function kr(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Sr(){return Array.from(this)}function Er(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var s=r[i];if(s)return s}return null}function Cr(){let t=0;for(const e of this)++t;return t}function Tr(){return!this.node()}function Fr(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,s=i.length,o;a<s;++a)(o=i[a])&&t.call(o,o.__data__,a,i);return this}function Mr(t){return function(){this.removeAttribute(t)}}function Or(t){return function(){this.removeAttributeNS(t.space,t.local)}}function zr(t,e){return function(){this.setAttribute(t,e)}}function $r(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Br(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Dr(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Pr(t,e){var n=Ot(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Or:Mr:typeof e=="function"?n.local?Dr:Br:n.local?$r:zr)(n,e))}function Pe(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Lr(t){return function(){this.style.removeProperty(t)}}function Rr(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Ir(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function qr(t,e,n){return arguments.length>1?this.each((e==null?Lr:typeof e=="function"?Ir:Rr)(t,e,n??"")):lt(this.node(),t)}function lt(t,e){return t.style.getPropertyValue(e)||Pe(t).getComputedStyle(t,null).getPropertyValue(e)}function Vr(t){return function(){delete this[t]}}function Hr(t,e){return function(){this[t]=e}}function Ur(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Gr(t,e){return arguments.length>1?this.each((e==null?Vr:typeof e=="function"?Ur:Hr)(t,e)):this.node()[t]}function Le(t){return t.trim().split(/^|\s+/)}function ae(t){return t.classList||new Re(t)}function Re(t){this._node=t,this._names=Le(t.getAttribute("class")||"")}Re.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Ie(t,e){for(var n=ae(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function qe(t,e){for(var n=ae(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Yr(t){return function(){Ie(this,t)}}function Qr(t){return function(){qe(this,t)}}function Xr(t,e){return function(){(e.apply(this,arguments)?Ie:qe)(this,t)}}function Wr(t,e){var n=Le(t+"");if(arguments.length<2){for(var r=ae(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Xr:e?Yr:Qr)(n,e))}function Kr(){this.textContent=""}function Zr(t){return function(){this.textContent=t}}function Jr(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function ti(t){return arguments.length?this.each(t==null?Kr:(typeof t=="function"?Jr:Zr)(t)):this.node().textContent}function ei(){this.innerHTML=""}function ni(t){return function(){this.innerHTML=t}}function ri(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function ii(t){return arguments.length?this.each(t==null?ei:(typeof t=="function"?ri:ni)(t)):this.node().innerHTML}function ai(){this.nextSibling&&this.parentNode.appendChild(this)}function si(){return this.each(ai)}function oi(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function li(){return this.each(oi)}function ui(t){var e=typeof t=="function"?t:Oe(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function ci(){return null}function fi(t,e){var n=typeof t=="function"?t:Oe(t),r=e==null?ci:typeof e=="function"?e:ie(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function hi(){var t=this.parentNode;t&&t.removeChild(this)}function di(){return this.each(hi)}function pi(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function mi(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function gi(t){return this.select(t?mi:pi)}function yi(t){return arguments.length?this.property("__data__",t):this.node().__data__}function vi(t){return function(e){t.call(this,e,this.__data__)}}function xi(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function wi(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function _i(t,e,n){return function(){var r=this.__on,i,a=vi(e);if(r){for(var s=0,o=r.length;s<o;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=e;return}}this.addEventListener(t.type,a,n),i={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(i):this.__on=[i]}}function bi(t,e,n){var r=xi(t+""),i,a=r.length,s;if(arguments.length<2){var o=this.node().__on;if(o){for(var f=0,p=o.length,g;f<p;++f)for(i=0,g=o[f];i<a;++i)if((s=r[i]).type===g.type&&s.name===g.name)return g.value}return}for(o=e?_i:wi,i=0;i<a;++i)this.each(o(r[i],e,n));return this}function Ve(t,e,n){var r=Pe(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Ni(t,e){return function(){return Ve(this,t,e)}}function ji(t,e){return function(){return Ve(this,t,e.apply(this,arguments))}}function Ai(t,e){return this.each((typeof e=="function"?ji:Ni)(t,e))}function*ki(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length,s;i<a;++i)(s=r[i])&&(yield s)}var He=[null];function G(t,e){this._groups=t,this._parents=e}function xt(){return new G([[document.documentElement]],He)}function Si(){return this}G.prototype=xt.prototype={constructor:G,select:Jn,selectAll:rr,selectChild:or,selectChildren:fr,filter:hr,data:vr,enter:dr,exit:wr,join:_r,merge:br,selection:Si,order:Nr,sort:jr,call:kr,nodes:Sr,node:Er,size:Cr,empty:Tr,each:Fr,attr:Pr,style:qr,property:Gr,classed:Wr,text:ti,html:ii,raise:si,lower:li,append:ui,insert:fi,remove:di,clone:gi,datum:yi,on:bi,dispatch:Ai,[Symbol.iterator]:ki};function X(t){return typeof t=="string"?new G([[document.querySelector(t)]],[document.documentElement]):new G([[t]],He)}function Ei(t){let e;for(;e=t.sourceEvent;)t=e;return t}function tt(t,e){if(t=Ei(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const Ci={passive:!1},gt={capture:!0,passive:!1};function Vt(t){t.stopImmediatePropagation()}function ot(t){t.preventDefault(),t.stopImmediatePropagation()}function Ue(t){var e=t.document.documentElement,n=X(t).on("dragstart.drag",ot,gt);"onselectstart"in e?n.on("selectstart.drag",ot,gt):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Ge(t,e){var n=t.document.documentElement,r=X(t).on("dragstart.drag",null);e&&(r.on("click.drag",ot,gt),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Nt=t=>()=>t;function Kt(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:a,x:s,y:o,dx:f,dy:p,dispatch:g}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:f,enumerable:!0,configurable:!0},dy:{value:p,enumerable:!0,configurable:!0},_:{value:g}})}Kt.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Ti(t){return!t.ctrlKey&&!t.button}function Fi(){return this.parentNode}function Mi(t,e){return e??{x:t.x,y:t.y}}function Oi(){return navigator.maxTouchPoints||"ontouchstart"in this}function zi(){var t=Ti,e=Fi,n=Mi,r=Oi,i={},a=vt("start","drag","end"),s=0,o,f,p,g,N=0;function x(d){d.on("mousedown.drag",h).filter(r).on("touchstart.drag",l).on("touchmove.drag",u,Ci).on("touchend.drag touchcancel.drag",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(d,b){if(!(g||!t.call(this,d,b))){var A=_(this,e.call(this,d,b),d,b,"mouse");A&&(X(d.view).on("mousemove.drag",w,gt).on("mouseup.drag",c,gt),Ue(d.view),Vt(d),p=!1,o=d.clientX,f=d.clientY,A("start",d))}}function w(d){if(ot(d),!p){var b=d.clientX-o,A=d.clientY-f;p=b*b+A*A>N}i.mouse("drag",d)}function c(d){X(d.view).on("mousemove.drag mouseup.drag",null),Ge(d.view,p),ot(d),i.mouse("end",d)}function l(d,b){if(t.call(this,d,b)){var A=d.changedTouches,C=e.call(this,d,b),k=A.length,O,$;for(O=0;O<k;++O)($=_(this,C,d,b,A[O].identifier,A[O]))&&(Vt(d),$("start",d,A[O]))}}function u(d){var b=d.changedTouches,A=b.length,C,k;for(C=0;C<A;++C)(k=i[b[C].identifier])&&(ot(d),k("drag",d,b[C]))}function m(d){var b=d.changedTouches,A=b.length,C,k;for(g&&clearTimeout(g),g=setTimeout(function(){g=null},500),C=0;C<A;++C)(k=i[b[C].identifier])&&(Vt(d),k("end",d,b[C]))}function _(d,b,A,C,k,O){var $=a.copy(),L=tt(O||A,b),B,T,y;if((y=n.call(d,new Kt("beforestart",{sourceEvent:A,target:x,identifier:k,active:s,x:L[0],y:L[1],dx:0,dy:0,dispatch:$}),C))!=null)return B=y.x-L[0]||0,T=y.y-L[1]||0,function S(j,E,F){var M=L,z;switch(j){case"start":i[k]=S,z=s++;break;case"end":delete i[k],--s;case"drag":L=tt(F||E,b),z=s;break}$.call(j,d,new Kt(j,{sourceEvent:E,subject:y,target:x,identifier:k,active:z,x:L[0]+B,y:L[1]+T,dx:L[0]-M[0],dy:L[1]-M[1],dispatch:$}),C)}}return x.filter=function(d){return arguments.length?(t=typeof d=="function"?d:Nt(!!d),x):t},x.container=function(d){return arguments.length?(e=typeof d=="function"?d:Nt(d),x):e},x.subject=function(d){return arguments.length?(n=typeof d=="function"?d:Nt(d),x):n},x.touchable=function(d){return arguments.length?(r=typeof d=="function"?d:Nt(!!d),x):r},x.on=function(){var d=a.on.apply(a,arguments);return d===a?x:d},x.clickDistance=function(d){return arguments.length?(N=(d=+d)*d,x):Math.sqrt(N)},x}var ut=0,ht=0,ct=0,Ye=1e3,Tt,dt,Ft=0,it=0,zt=0,yt=typeof performance=="object"&&performance.now?performance:Date,Qe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function se(){return it||(Qe($i),it=yt.now()+zt)}function $i(){it=0}function Mt(){this._call=this._time=this._next=null}Mt.prototype=oe.prototype={constructor:Mt,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?se():+n)+(e==null?0:+e),!this._next&&dt!==this&&(dt?dt._next=this:Tt=this,dt=this),this._call=t,this._time=n,Zt()},stop:function(){this._call&&(this._call=null,this._time=1/0,Zt())}};function oe(t,e,n){var r=new Mt;return r.restart(t,e,n),r}function Bi(){se(),++ut;for(var t=Tt,e;t;)(e=it-t._time)>=0&&t._call.call(void 0,e),t=t._next;--ut}function we(){it=(Ft=yt.now())+zt,ut=ht=0;try{Bi()}finally{ut=0,Pi(),it=0}}function Di(){var t=yt.now(),e=t-Ft;e>Ye&&(zt-=e,Ft=t)}function Pi(){for(var t,e=Tt,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Tt=n);dt=t,Zt(r)}function Zt(t){if(!ut){ht&&(ht=clearTimeout(ht));var e=t-it;e>24?(t<1/0&&(ht=setTimeout(we,t-yt.now()-zt)),ct&&(ct=clearInterval(ct))):(ct||(Ft=yt.now(),ct=setInterval(Di,Ye)),ut=1,Qe(we))}}function _e(t,e,n){var r=new Mt;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Li=vt("start","end","cancel","interrupt"),Ri=[],Xe=0,be=1,Jt=2,kt=3,Ne=4,te=5,St=6;function $t(t,e,n,r,i,a){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;Ii(t,n,{name:e,index:r,group:i,on:Li,tween:Ri,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Xe})}function le(t,e){var n=Q(t,e);if(n.state>Xe)throw new Error("too late; already scheduled");return n}function W(t,e){var n=Q(t,e);if(n.state>kt)throw new Error("too late; already running");return n}function Q(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ii(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=oe(a,0,n.time);function a(p){n.state=be,n.timer.restart(s,n.delay,n.time),n.delay<=p&&s(p-n.delay)}function s(p){var g,N,x,h;if(n.state!==be)return f();for(g in r)if(h=r[g],h.name===n.name){if(h.state===kt)return _e(s);h.state===Ne?(h.state=St,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete r[g]):+g<e&&(h.state=St,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete r[g])}if(_e(function(){n.state===kt&&(n.state=Ne,n.timer.restart(o,n.delay,n.time),o(p))}),n.state=Jt,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Jt){for(n.state=kt,i=new Array(x=n.tween.length),g=0,N=-1;g<x;++g)(h=n.tween[g].value.call(t,t.__data__,n.index,n.group))&&(i[++N]=h);i.length=N+1}}function o(p){for(var g=p<n.duration?n.ease.call(null,p/n.duration):(n.timer.restart(f),n.state=te,1),N=-1,x=i.length;++N<x;)i[N].call(t,g);n.state===te&&(n.on.call("end",t,t.__data__,n.index,n.group),f())}function f(){n.state=St,n.timer.stop(),delete r[e];for(var p in r)return;delete t.__transition}}function Et(t,e){var n=t.__transition,r,i,a=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((r=n[s]).name!==e){a=!1;continue}i=r.state>Jt&&r.state<te,r.state=St,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[s]}a&&delete t.__transition}}function qi(t){return this.each(function(){Et(this,t)})}function Vi(t,e){var n,r;return function(){var i=W(this,t),a=i.tween;if(a!==n){r=n=a;for(var s=0,o=r.length;s<o;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function Hi(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=W(this,t),s=a.tween;if(s!==r){i=(r=s).slice();for(var o={name:e,value:n},f=0,p=i.length;f<p;++f)if(i[f].name===e){i[f]=o;break}f===p&&i.push(o)}a.tween=i}}function Ui(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Q(this.node(),n).tween,i=0,a=r.length,s;i<a;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((e==null?Vi:Hi)(n,t,e))}function ue(t,e,n){var r=t._id;return t.each(function(){var i=W(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Q(i,r).value[e]}}function We(t,e){var n;return(typeof e=="number"?_n:e instanceof he?fe:(n=he(e))?(e=n,fe):bn)(t,e)}function Gi(t){return function(){this.removeAttribute(t)}}function Yi(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Qi(t,e,n){var r,i=n+"",a;return function(){var s=this.getAttribute(t);return s===i?null:s===r?a:a=e(r=s,n)}}function Xi(t,e,n){var r,i=n+"",a;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?a:a=e(r=s,n)}}function Wi(t,e,n){var r,i,a;return function(){var s,o=n(this),f;return o==null?void this.removeAttribute(t):(s=this.getAttribute(t),f=o+"",s===f?null:s===r&&f===i?a:(i=f,a=e(r=s,o)))}}function Ki(t,e,n){var r,i,a;return function(){var s,o=n(this),f;return o==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),f=o+"",s===f?null:s===r&&f===i?a:(i=f,a=e(r=s,o)))}}function Zi(t,e){var n=Ot(t),r=n==="transform"?Nn:We;return this.attrTween(t,typeof e=="function"?(n.local?Ki:Wi)(n,r,ue(this,"attr."+t,e)):e==null?(n.local?Yi:Gi)(n):(n.local?Xi:Qi)(n,r,e))}function Ji(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function ta(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function ea(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&ta(t,a)),n}return i._value=e,i}function na(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&Ji(t,a)),n}return i._value=e,i}function ra(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Ot(t);return this.tween(n,(r.local?ea:na)(r,e))}function ia(t,e){return function(){le(this,t).delay=+e.apply(this,arguments)}}function aa(t,e){return e=+e,function(){le(this,t).delay=e}}function sa(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ia:aa)(e,t)):Q(this.node(),e).delay}function oa(t,e){return function(){W(this,t).duration=+e.apply(this,arguments)}}function la(t,e){return e=+e,function(){W(this,t).duration=e}}function ua(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?oa:la)(e,t)):Q(this.node(),e).duration}function ca(t,e){if(typeof e!="function")throw new Error;return function(){W(this,t).ease=e}}function fa(t){var e=this._id;return arguments.length?this.each(ca(e,t)):Q(this.node(),e).ease}function ha(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;W(this,t).ease=n}}function da(t){if(typeof t!="function")throw new Error;return this.each(ha(this._id,t))}function pa(t){typeof t!="function"&&(t=$e(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],s=a.length,o=r[i]=[],f,p=0;p<s;++p)(f=a[p])&&t.call(f,f.__data__,p,a)&&o.push(f);return new rt(r,this._parents,this._name,this._id)}function ma(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),s=new Array(r),o=0;o<a;++o)for(var f=e[o],p=n[o],g=f.length,N=s[o]=new Array(g),x,h=0;h<g;++h)(x=f[h]||p[h])&&(N[h]=x);for(;o<r;++o)s[o]=e[o];return new rt(s,this._parents,this._name,this._id)}function ga(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function ya(t,e,n){var r,i,a=ga(e)?le:W;return function(){var s=a(this,t),o=s.on;o!==r&&(i=(r=o).copy()).on(e,n),s.on=i}}function va(t,e){var n=this._id;return arguments.length<2?Q(this.node(),n).on.on(t):this.each(ya(n,t,e))}function xa(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function wa(){return this.on("end.remove",xa(this._id))}function _a(t){var e=this._name,n=this._id;typeof t!="function"&&(t=ie(t));for(var r=this._groups,i=r.length,a=new Array(i),s=0;s<i;++s)for(var o=r[s],f=o.length,p=a[s]=new Array(f),g,N,x=0;x<f;++x)(g=o[x])&&(N=t.call(g,g.__data__,x,o))&&("__data__"in g&&(N.__data__=g.__data__),p[x]=N,$t(p[x],e,n,x,p,Q(g,n)));return new rt(a,this._parents,e,n)}function ba(t){var e=this._name,n=this._id;typeof t!="function"&&(t=ze(t));for(var r=this._groups,i=r.length,a=[],s=[],o=0;o<i;++o)for(var f=r[o],p=f.length,g,N=0;N<p;++N)if(g=f[N]){for(var x=t.call(g,g.__data__,N,f),h,w=Q(g,n),c=0,l=x.length;c<l;++c)(h=x[c])&&$t(h,e,n,c,x,w);a.push(x),s.push(g)}return new rt(a,s,e,n)}var Na=xt.prototype.constructor;function ja(){return new Na(this._groups,this._parents)}function Aa(t,e){var n,r,i;return function(){var a=lt(this,t),s=(this.style.removeProperty(t),lt(this,t));return a===s?null:a===n&&s===r?i:i=e(n=a,r=s)}}function Ke(t){return function(){this.style.removeProperty(t)}}function ka(t,e,n){var r,i=n+"",a;return function(){var s=lt(this,t);return s===i?null:s===r?a:a=e(r=s,n)}}function Sa(t,e,n){var r,i,a;return function(){var s=lt(this,t),o=n(this),f=o+"";return o==null&&(f=o=(this.style.removeProperty(t),lt(this,t))),s===f?null:s===r&&f===i?a:(i=f,a=e(r=s,o))}}function Ea(t,e){var n,r,i,a="style."+e,s="end."+a,o;return function(){var f=W(this,t),p=f.on,g=f.value[a]==null?o||(o=Ke(e)):void 0;(p!==n||i!==g)&&(r=(n=p).copy()).on(s,i=g),f.on=r}}function Ca(t,e,n){var r=(t+="")=="transform"?jn:We;return e==null?this.styleTween(t,Aa(t,r)).on("end.style."+t,Ke(t)):typeof e=="function"?this.styleTween(t,Sa(t,r,ue(this,"style."+t,e))).each(Ea(this._id,t)):this.styleTween(t,ka(t,r,e),n).on("end.style."+t,null)}function Ta(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Fa(t,e,n){var r,i;function a(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&Ta(t,s,n)),r}return a._value=e,a}function Ma(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Fa(t,e,n??""))}function Oa(t){return function(){this.textContent=t}}function za(t){return function(){var e=t(this);this.textContent=e??""}}function $a(t){return this.tween("text",typeof t=="function"?za(ue(this,"text",t)):Oa(t==null?"":t+""))}function Ba(t){return function(e){this.textContent=t.call(this,e)}}function Da(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Ba(i)),e}return r._value=t,r}function Pa(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Da(t))}function La(){for(var t=this._name,e=this._id,n=Ze(),r=this._groups,i=r.length,a=0;a<i;++a)for(var s=r[a],o=s.length,f,p=0;p<o;++p)if(f=s[p]){var g=Q(f,e);$t(f,t,n,p,s,{time:g.time+g.delay+g.duration,delay:0,duration:g.duration,ease:g.ease})}return new rt(r,this._parents,t,n)}function Ra(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(a,s){var o={value:s},f={value:function(){--i===0&&a()}};n.each(function(){var p=W(this,r),g=p.on;g!==t&&(e=(t=g).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(f)),p.on=e}),i===0&&a()})}var Ia=0;function rt(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Ze(){return++Ia}var J=xt.prototype;rt.prototype={constructor:rt,select:_a,selectAll:ba,selectChild:J.selectChild,selectChildren:J.selectChildren,filter:pa,merge:ma,selection:ja,transition:La,call:J.call,nodes:J.nodes,node:J.node,size:J.size,empty:J.empty,each:J.each,on:va,attr:Zi,attrTween:ra,style:Ca,styleTween:Ma,text:$a,textTween:Pa,remove:wa,tween:Ui,delay:sa,duration:ua,ease:fa,easeVarying:da,end:Ra,[Symbol.iterator]:J[Symbol.iterator]};function qa(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Va={time:null,delay:0,duration:250,ease:qa};function Ha(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Ua(t){var e,n;t instanceof rt?(e=t._id,t=t._name):(e=Ze(),(n=Va).time=se(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var s=r[a],o=s.length,f,p=0;p<o;++p)(f=s[p])&&$t(f,t,e,p,s,n||Ha(f,e));return new rt(r,this._parents,t,e)}xt.prototype.interrupt=qi;xt.prototype.transition=Ua;function Ga(t,e){var n,r=1;t==null&&(t=0),e==null&&(e=0);function i(){var a,s=n.length,o,f=0,p=0;for(a=0;a<s;++a)o=n[a],f+=o.x,p+=o.y;for(f=(f/s-t)*r,p=(p/s-e)*r,a=0;a<s;++a)o=n[a],o.x-=f,o.y-=p}return i.initialize=function(a){n=a},i.x=function(a){return arguments.length?(t=+a,i):t},i.y=function(a){return arguments.length?(e=+a,i):e},i.strength=function(a){return arguments.length?(r=+a,i):r},i}function Ya(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return Je(this.cover(e,n),e,n,t)}function Je(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,a=t._root,s={data:r},o=t._x0,f=t._y0,p=t._x1,g=t._y1,N,x,h,w,c,l,u,m;if(!a)return t._root=s,t;for(;a.length;)if((c=e>=(N=(o+p)/2))?o=N:p=N,(l=n>=(x=(f+g)/2))?f=x:g=x,i=a,!(a=a[u=l<<1|c]))return i[u]=s,t;if(h=+t._x.call(null,a.data),w=+t._y.call(null,a.data),e===h&&n===w)return s.next=a,i?i[u]=s:t._root=s,t;do i=i?i[u]=new Array(4):t._root=new Array(4),(c=e>=(N=(o+p)/2))?o=N:p=N,(l=n>=(x=(f+g)/2))?f=x:g=x;while((u=l<<1|c)===(m=(w>=x)<<1|h>=N));return i[m]=a,i[u]=s,t}function Qa(t){var e,n,r=t.length,i,a,s=new Array(r),o=new Array(r),f=1/0,p=1/0,g=-1/0,N=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(a=+this._y.call(null,e))||(s[n]=i,o[n]=a,i<f&&(f=i),i>g&&(g=i),a<p&&(p=a),a>N&&(N=a));if(f>g||p>N)return this;for(this.cover(f,p).cover(g,N),n=0;n<r;++n)Je(this,s[n],o[n],t[n]);return this}function Xa(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,a=(r=Math.floor(e))+1;else{for(var s=i-n||1,o=this._root,f,p;n>t||t>=i||r>e||e>=a;)switch(p=(e<r)<<1|t<n,f=new Array(4),f[p]=o,o=f,s*=2,p){case 0:i=n+s,a=r+s;break;case 1:n=i-s,a=r+s;break;case 2:i=n+s,r=a-s;break;case 3:n=i-s,r=a-s;break}this._root&&this._root.length&&(this._root=o)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this}function Wa(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function Ka(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function q(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function Za(t,e,n){var r,i=this._x0,a=this._y0,s,o,f,p,g=this._x1,N=this._y1,x=[],h=this._root,w,c;for(h&&x.push(new q(h,i,a,g,N)),n==null?n=1/0:(i=t-n,a=e-n,g=t+n,N=e+n,n*=n);w=x.pop();)if(!(!(h=w.node)||(s=w.x0)>g||(o=w.y0)>N||(f=w.x1)<i||(p=w.y1)<a))if(h.length){var l=(s+f)/2,u=(o+p)/2;x.push(new q(h[3],l,u,f,p),new q(h[2],s,u,l,p),new q(h[1],l,o,f,u),new q(h[0],s,o,l,u)),(c=(e>=u)<<1|t>=l)&&(w=x[x.length-1],x[x.length-1]=x[x.length-1-c],x[x.length-1-c]=w)}else{var m=t-+this._x.call(null,h.data),_=e-+this._y.call(null,h.data),d=m*m+_*_;if(d<n){var b=Math.sqrt(n=d);i=t-b,a=e-b,g=t+b,N=e+b,r=h.data}}return r}function Ja(t){if(isNaN(g=+this._x.call(null,t))||isNaN(N=+this._y.call(null,t)))return this;var e,n=this._root,r,i,a,s=this._x0,o=this._y0,f=this._x1,p=this._y1,g,N,x,h,w,c,l,u;if(!n)return this;if(n.length)for(;;){if((w=g>=(x=(s+f)/2))?s=x:f=x,(c=N>=(h=(o+p)/2))?o=h:p=h,e=n,!(n=n[l=c<<1|w]))return this;if(!n.length)break;(e[l+1&3]||e[l+2&3]||e[l+3&3])&&(r=e,u=l)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,i?(a?i.next=a:delete i.next,this):e?(a?e[l]=a:delete e[l],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[u]=n:this._root=n),this):(this._root=a,this)}function ts(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function es(){return this._root}function ns(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function rs(t){var e=[],n,r=this._root,i,a,s,o,f;for(r&&e.push(new q(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,a=n.x0,s=n.y0,o=n.x1,f=n.y1)&&r.length){var p=(a+o)/2,g=(s+f)/2;(i=r[3])&&e.push(new q(i,p,g,o,f)),(i=r[2])&&e.push(new q(i,a,g,p,f)),(i=r[1])&&e.push(new q(i,p,s,o,g)),(i=r[0])&&e.push(new q(i,a,s,p,g))}return this}function is(t){var e=[],n=[],r;for(this._root&&e.push(new q(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var a,s=r.x0,o=r.y0,f=r.x1,p=r.y1,g=(s+f)/2,N=(o+p)/2;(a=i[0])&&e.push(new q(a,s,o,g,N)),(a=i[1])&&e.push(new q(a,g,o,f,N)),(a=i[2])&&e.push(new q(a,s,N,g,p)),(a=i[3])&&e.push(new q(a,g,N,f,p))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function as(t){return t[0]}function ss(t){return arguments.length?(this._x=t,this):this._x}function os(t){return t[1]}function ls(t){return arguments.length?(this._y=t,this):this._y}function tn(t,e,n){var r=new ce(e??as,n??os,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function ce(t,e,n,r,i,a){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function je(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var V=tn.prototype=ce.prototype;V.copy=function(){var t=new ce(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=je(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=je(r));return t};V.add=Ya;V.addAll=Qa;V.cover=Xa;V.data=Wa;V.extent=Ka;V.find=Za;V.remove=Ja;V.removeAll=ts;V.root=es;V.size=ns;V.visit=rs;V.visitAfter=is;V.x=ss;V.y=ls;function mt(t){return function(){return t}}function st(t){return(t()-.5)*1e-6}function us(t){return t.index}function Ae(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function cs(t){var e=us,n=N,r,i=mt(30),a,s,o,f,p,g=1;t==null&&(t=[]);function N(l){return 1/Math.min(o[l.source.index],o[l.target.index])}function x(l){for(var u=0,m=t.length;u<g;++u)for(var _=0,d,b,A,C,k,O,$;_<m;++_)d=t[_],b=d.source,A=d.target,C=A.x+A.vx-b.x-b.vx||st(p),k=A.y+A.vy-b.y-b.vy||st(p),O=Math.sqrt(C*C+k*k),O=(O-a[_])/O*l*r[_],C*=O,k*=O,A.vx-=C*($=f[_]),A.vy-=k*$,b.vx+=C*($=1-$),b.vy+=k*$}function h(){if(s){var l,u=s.length,m=t.length,_=new Map(s.map((b,A)=>[e(b,A,s),b])),d;for(l=0,o=new Array(u);l<m;++l)d=t[l],d.index=l,typeof d.source!="object"&&(d.source=Ae(_,d.source)),typeof d.target!="object"&&(d.target=Ae(_,d.target)),o[d.source.index]=(o[d.source.index]||0)+1,o[d.target.index]=(o[d.target.index]||0)+1;for(l=0,f=new Array(m);l<m;++l)d=t[l],f[l]=o[d.source.index]/(o[d.source.index]+o[d.target.index]);r=new Array(m),w(),a=new Array(m),c()}}function w(){if(s)for(var l=0,u=t.length;l<u;++l)r[l]=+n(t[l],l,t)}function c(){if(s)for(var l=0,u=t.length;l<u;++l)a[l]=+i(t[l],l,t)}return x.initialize=function(l,u){s=l,p=u,h()},x.links=function(l){return arguments.length?(t=l,h(),x):t},x.id=function(l){return arguments.length?(e=l,x):e},x.iterations=function(l){return arguments.length?(g=+l,x):g},x.strength=function(l){return arguments.length?(n=typeof l=="function"?l:mt(+l),w(),x):n},x.distance=function(l){return arguments.length?(i=typeof l=="function"?l:mt(+l),c(),x):i},x}const fs=1664525,hs=1013904223,ke=4294967296;function ds(){let t=1;return()=>(t=(fs*t+hs)%ke)/ke}function ps(t){return t.x}function ms(t){return t.y}var gs=10,ys=Math.PI*(3-Math.sqrt(5));function vs(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),a=0,s=.6,o=new Map,f=oe(N),p=vt("tick","end"),g=ds();t==null&&(t=[]);function N(){x(),p.call("tick",e),n<r&&(f.stop(),p.call("end",e))}function x(c){var l,u=t.length,m;c===void 0&&(c=1);for(var _=0;_<c;++_)for(n+=(a-n)*i,o.forEach(function(d){d(n)}),l=0;l<u;++l)m=t[l],m.fx==null?m.x+=m.vx*=s:(m.x=m.fx,m.vx=0),m.fy==null?m.y+=m.vy*=s:(m.y=m.fy,m.vy=0);return e}function h(){for(var c=0,l=t.length,u;c<l;++c){if(u=t[c],u.index=c,u.fx!=null&&(u.x=u.fx),u.fy!=null&&(u.y=u.fy),isNaN(u.x)||isNaN(u.y)){var m=gs*Math.sqrt(.5+c),_=c*ys;u.x=m*Math.cos(_),u.y=m*Math.sin(_)}(isNaN(u.vx)||isNaN(u.vy))&&(u.vx=u.vy=0)}}function w(c){return c.initialize&&c.initialize(t,g),c}return h(),e={tick:x,restart:function(){return f.restart(N),e},stop:function(){return f.stop(),e},nodes:function(c){return arguments.length?(t=c,h(),o.forEach(w),e):t},alpha:function(c){return arguments.length?(n=+c,e):n},alphaMin:function(c){return arguments.length?(r=+c,e):r},alphaDecay:function(c){return arguments.length?(i=+c,e):+i},alphaTarget:function(c){return arguments.length?(a=+c,e):a},velocityDecay:function(c){return arguments.length?(s=1-c,e):1-s},randomSource:function(c){return arguments.length?(g=c,o.forEach(w),e):g},force:function(c,l){return arguments.length>1?(l==null?o.delete(c):o.set(c,w(l)),e):o.get(c)},find:function(c,l,u){var m=0,_=t.length,d,b,A,C,k;for(u==null?u=1/0:u*=u,m=0;m<_;++m)C=t[m],d=c-C.x,b=l-C.y,A=d*d+b*b,A<u&&(k=C,u=A);return k},on:function(c,l){return arguments.length>1?(p.on(c,l),e):p.on(c)}}}function xs(){var t,e,n,r,i=mt(-30),a,s=1,o=1/0,f=.81;function p(h){var w,c=t.length,l=tn(t,ps,ms).visitAfter(N);for(r=h,w=0;w<c;++w)e=t[w],l.visit(x)}function g(){if(t){var h,w=t.length,c;for(a=new Array(w),h=0;h<w;++h)c=t[h],a[c.index]=+i(c,h,t)}}function N(h){var w=0,c,l,u=0,m,_,d;if(h.length){for(m=_=d=0;d<4;++d)(c=h[d])&&(l=Math.abs(c.value))&&(w+=c.value,u+=l,m+=l*c.x,_+=l*c.y);h.x=m/u,h.y=_/u}else{c=h,c.x=c.data.x,c.y=c.data.y;do w+=a[c.data.index];while(c=c.next)}h.value=w}function x(h,w,c,l){if(!h.value)return!0;var u=h.x-e.x,m=h.y-e.y,_=l-w,d=u*u+m*m;if(_*_/f<d)return d<o&&(u===0&&(u=st(n),d+=u*u),m===0&&(m=st(n),d+=m*m),d<s&&(d=Math.sqrt(s*d)),e.vx+=u*h.value*r/d,e.vy+=m*h.value*r/d),!0;if(h.length||d>=o)return;(h.data!==e||h.next)&&(u===0&&(u=st(n),d+=u*u),m===0&&(m=st(n),d+=m*m),d<s&&(d=Math.sqrt(s*d)));do h.data!==e&&(_=a[h.data.index]*r/d,e.vx+=u*_,e.vy+=m*_);while(h=h.next)}return p.initialize=function(h,w){t=h,n=w,g()},p.strength=function(h){return arguments.length?(i=typeof h=="function"?h:mt(+h),g(),p):i},p.distanceMin=function(h){return arguments.length?(s=h*h,p):Math.sqrt(s)},p.distanceMax=function(h){return arguments.length?(o=h*h,p):Math.sqrt(o)},p.theta=function(h){return arguments.length?(f=h*h,p):Math.sqrt(f)},p}const jt=t=>()=>t;function ws(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function nt(t,e,n){this.k=t,this.x=e,this.y=n}nt.prototype={constructor:nt,scale:function(t){return t===1?this:new nt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new nt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var en=new nt(1,0,0);nt.prototype;function Ht(t){t.stopImmediatePropagation()}function ft(t){t.preventDefault(),t.stopImmediatePropagation()}function _s(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function bs(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Se(){return this.__zoom||en}function Ns(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function js(){return navigator.maxTouchPoints||"ontouchstart"in this}function As(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>a?(a+s)/2:Math.min(0,a)||Math.max(0,s))}function ks(){var t=_s,e=bs,n=As,r=Ns,i=js,a=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],o=250,f=An,p=vt("start","zoom","end"),g,N,x,h=500,w=150,c=0,l=10;function u(y){y.property("__zoom",Se).on("wheel.zoom",k,{passive:!1}).on("mousedown.zoom",O).on("dblclick.zoom",$).filter(i).on("touchstart.zoom",L).on("touchmove.zoom",B).on("touchend.zoom touchcancel.zoom",T).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.transform=function(y,S,j,E){var F=y.selection?y.selection():y;F.property("__zoom",Se),y!==F?b(y,S,j,E):F.interrupt().each(function(){A(this,arguments).event(E).start().zoom(null,typeof S=="function"?S.apply(this,arguments):S).end()})},u.scaleBy=function(y,S,j,E){u.scaleTo(y,function(){var F=this.__zoom.k,M=typeof S=="function"?S.apply(this,arguments):S;return F*M},j,E)},u.scaleTo=function(y,S,j,E){u.transform(y,function(){var F=e.apply(this,arguments),M=this.__zoom,z=j==null?d(F):typeof j=="function"?j.apply(this,arguments):j,D=M.invert(z),P=typeof S=="function"?S.apply(this,arguments):S;return n(_(m(M,P),z,D),F,s)},j,E)},u.translateBy=function(y,S,j,E){u.transform(y,function(){return n(this.__zoom.translate(typeof S=="function"?S.apply(this,arguments):S,typeof j=="function"?j.apply(this,arguments):j),e.apply(this,arguments),s)},null,E)},u.translateTo=function(y,S,j,E,F){u.transform(y,function(){var M=e.apply(this,arguments),z=this.__zoom,D=E==null?d(M):typeof E=="function"?E.apply(this,arguments):E;return n(en.translate(D[0],D[1]).scale(z.k).translate(typeof S=="function"?-S.apply(this,arguments):-S,typeof j=="function"?-j.apply(this,arguments):-j),M,s)},E,F)};function m(y,S){return S=Math.max(a[0],Math.min(a[1],S)),S===y.k?y:new nt(S,y.x,y.y)}function _(y,S,j){var E=S[0]-j[0]*y.k,F=S[1]-j[1]*y.k;return E===y.x&&F===y.y?y:new nt(y.k,E,F)}function d(y){return[(+y[0][0]+ +y[1][0])/2,(+y[0][1]+ +y[1][1])/2]}function b(y,S,j,E){y.on("start.zoom",function(){A(this,arguments).event(E).start()}).on("interrupt.zoom end.zoom",function(){A(this,arguments).event(E).end()}).tween("zoom",function(){var F=this,M=arguments,z=A(F,M).event(E),D=e.apply(F,M),P=j==null?d(D):typeof j=="function"?j.apply(F,M):j,H=Math.max(D[1][0]-D[0][0],D[1][1]-D[0][1]),R=F.__zoom,I=typeof S=="function"?S.apply(F,M):S,K=f(R.invert(P).concat(H/R.k),I.invert(P).concat(H/I.k));return function(Y){if(Y===1)Y=I;else{var Z=K(Y),Bt=H/Z[2];Y=new nt(Bt,P[0]-Z[0]*Bt,P[1]-Z[1]*Bt)}z.zoom(null,Y)}})}function A(y,S,j){return!j&&y.__zooming||new C(y,S)}function C(y,S){this.that=y,this.args=S,this.active=0,this.sourceEvent=null,this.extent=e.apply(y,S),this.taps=0}C.prototype={event:function(y){return y&&(this.sourceEvent=y),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(y,S){return this.mouse&&y!=="mouse"&&(this.mouse[1]=S.invert(this.mouse[0])),this.touch0&&y!=="touch"&&(this.touch0[1]=S.invert(this.touch0[0])),this.touch1&&y!=="touch"&&(this.touch1[1]=S.invert(this.touch1[0])),this.that.__zoom=S,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(y){var S=X(this.that).datum();p.call(y,this.that,new ws(y,{sourceEvent:this.sourceEvent,target:u,transform:this.that.__zoom,dispatch:p}),S)}};function k(y,...S){if(!t.apply(this,arguments))return;var j=A(this,S).event(y),E=this.__zoom,F=Math.max(a[0],Math.min(a[1],E.k*Math.pow(2,r.apply(this,arguments)))),M=tt(y);if(j.wheel)(j.mouse[0][0]!==M[0]||j.mouse[0][1]!==M[1])&&(j.mouse[1]=E.invert(j.mouse[0]=M)),clearTimeout(j.wheel);else{if(E.k===F)return;j.mouse=[M,E.invert(M)],Et(this),j.start()}ft(y),j.wheel=setTimeout(z,w),j.zoom("mouse",n(_(m(E,F),j.mouse[0],j.mouse[1]),j.extent,s));function z(){j.wheel=null,j.end()}}function O(y,...S){if(x||!t.apply(this,arguments))return;var j=y.currentTarget,E=A(this,S,!0).event(y),F=X(y.view).on("mousemove.zoom",P,!0).on("mouseup.zoom",H,!0),M=tt(y,j),z=y.clientX,D=y.clientY;Ue(y.view),Ht(y),E.mouse=[M,this.__zoom.invert(M)],Et(this),E.start();function P(R){if(ft(R),!E.moved){var I=R.clientX-z,K=R.clientY-D;E.moved=I*I+K*K>c}E.event(R).zoom("mouse",n(_(E.that.__zoom,E.mouse[0]=tt(R,j),E.mouse[1]),E.extent,s))}function H(R){F.on("mousemove.zoom mouseup.zoom",null),Ge(R.view,E.moved),ft(R),E.event(R).end()}}function $(y,...S){if(t.apply(this,arguments)){var j=this.__zoom,E=tt(y.changedTouches?y.changedTouches[0]:y,this),F=j.invert(E),M=j.k*(y.shiftKey?.5:2),z=n(_(m(j,M),E,F),e.apply(this,S),s);ft(y),o>0?X(this).transition().duration(o).call(b,z,E,y):X(this).call(u.transform,z,E,y)}}function L(y,...S){if(t.apply(this,arguments)){var j=y.touches,E=j.length,F=A(this,S,y.changedTouches.length===E).event(y),M,z,D,P;for(Ht(y),z=0;z<E;++z)D=j[z],P=tt(D,this),P=[P,this.__zoom.invert(P),D.identifier],F.touch0?!F.touch1&&F.touch0[2]!==P[2]&&(F.touch1=P,F.taps=0):(F.touch0=P,M=!0,F.taps=1+!!g);g&&(g=clearTimeout(g)),M&&(F.taps<2&&(N=P[0],g=setTimeout(function(){g=null},h)),Et(this),F.start())}}function B(y,...S){if(this.__zooming){var j=A(this,S).event(y),E=y.changedTouches,F=E.length,M,z,D,P;for(ft(y),M=0;M<F;++M)z=E[M],D=tt(z,this),j.touch0&&j.touch0[2]===z.identifier?j.touch0[0]=D:j.touch1&&j.touch1[2]===z.identifier&&(j.touch1[0]=D);if(z=j.that.__zoom,j.touch1){var H=j.touch0[0],R=j.touch0[1],I=j.touch1[0],K=j.touch1[1],Y=(Y=I[0]-H[0])*Y+(Y=I[1]-H[1])*Y,Z=(Z=K[0]-R[0])*Z+(Z=K[1]-R[1])*Z;z=m(z,Math.sqrt(Y/Z)),D=[(H[0]+I[0])/2,(H[1]+I[1])/2],P=[(R[0]+K[0])/2,(R[1]+K[1])/2]}else if(j.touch0)D=j.touch0[0],P=j.touch0[1];else return;j.zoom("touch",n(_(z,D,P),j.extent,s))}}function T(y,...S){if(this.__zooming){var j=A(this,S).event(y),E=y.changedTouches,F=E.length,M,z;for(Ht(y),x&&clearTimeout(x),x=setTimeout(function(){x=null},h),M=0;M<F;++M)z=E[M],j.touch0&&j.touch0[2]===z.identifier?delete j.touch0:j.touch1&&j.touch1[2]===z.identifier&&delete j.touch1;if(j.touch1&&!j.touch0&&(j.touch0=j.touch1,delete j.touch1),j.touch0)j.touch0[1]=this.__zoom.invert(j.touch0[0]);else if(j.end(),j.taps===2&&(z=tt(z,this),Math.hypot(N[0]-z[0],N[1]-z[1])<l)){var D=X(this).on("dblclick.zoom");D&&D.apply(this,arguments)}}}return u.wheelDelta=function(y){return arguments.length?(r=typeof y=="function"?y:jt(+y),u):r},u.filter=function(y){return arguments.length?(t=typeof y=="function"?y:jt(!!y),u):t},u.touchable=function(y){return arguments.length?(i=typeof y=="function"?y:jt(!!y),u):i},u.extent=function(y){return arguments.length?(e=typeof y=="function"?y:jt([[+y[0][0],+y[0][1]],[+y[1][0],+y[1][1]]]),u):e},u.scaleExtent=function(y){return arguments.length?(a[0]=+y[0],a[1]=+y[1],u):[a[0],a[1]]},u.translateExtent=function(y){return arguments.length?(s[0][0]=+y[0][0],s[1][0]=+y[1][0],s[0][1]=+y[0][1],s[1][1]=+y[1][1],u):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},u.constrain=function(y){return arguments.length?(n=y,u):n},u.duration=function(y){return arguments.length?(o=+y,u):o},u.interpolate=function(y){return arguments.length?(f=y,u):f},u.on=function(){var y=p.on.apply(p,arguments);return y===p?u:y},u.clickDistance=function(y){return arguments.length?(c=(y=+y)*y,u):Math.sqrt(c)},u.tapDistance=function(y){return arguments.length?(l=+y,u):l},u}const Ss=et.forwardRef((t,e)=>{const n=et.useRef(null);return et.useImperativeHandle(e,()=>({requestFullscreen:()=>{const r=n.current;document.fullscreenElement?document.exitFullscreen():r.requestFullscreen()}})),et.useEffect(()=>{let r=null,i=null,a=null;const s=(f,p,g)=>{const N=f.offsetWidth,x=f.offsetHeight;p.attr("width",N).attr("height",x),g.attr("transform",`translate(${N/2}, ${x/2})`)},o=()=>{fetch(route("producer.graph.data")).then(f=>f.json()).then(f=>{const p=X(n.current),g=p.node().offsetWidth||1200,N=p.node().offsetHeight||500;p.select("svg").remove();const x=p.append("svg").attr("width",g).attr("height",N).style("background-color","#1e1e1e").classed("rounded-lg",!0).call(ks().scaleExtent([.5,2]).on("zoom",m=>h.attr("transform",m.transform))),h=x.append("g").attr("transform",`translate(${g/2}, ${N/2})`);r=x,i=h;const w=vs(f.nodes).force("link",cs(f.links).id(m=>m.id).distance(100)).force("charge",xs().strength(-200)).force("center",Ga(0,0));a=w;const c=h.append("g").selectAll("line").data(f.links).enter().append("line").attr("stroke-width",2).attr("stroke","#888"),l=h.append("g").selectAll("circle").data(f.nodes).enter().append("circle").attr("r",10).attr("fill",m=>m.group==="producer"?"#FF5555":m.group==="track"?"#EA6115":"#6A4BFB").call(zi().on("start",(m,_)=>{m.active||w.alphaTarget(.3).restart(),_.fx=_.x,_.fy=_.y}).on("drag",(m,_)=>{_.fx=m.x,_.fy=m.y}).on("end",(m,_)=>{m.active||w.alphaTarget(0),_.fx=null,_.fy=null})),u=h.append("g").selectAll("text").data(f.nodes).enter().append("text").text(m=>m.label).attr("font-size","12px").attr("fill","#ffffff").attr("dx",12).attr("dy",4);w.on("tick",()=>{c.attr("x1",m=>m.source.x).attr("y1",m=>m.source.y).attr("x2",m=>m.target.x).attr("y2",m=>m.target.y),l.attr("cx",m=>m.x).attr("cy",m=>m.y),u.attr("x",m=>m.x).attr("y",m=>m.y)})})};document.addEventListener("fullscreenchange",()=>{r&&i&&(s(n.current,r,i),a==null||a.alpha(.3).restart())}),o()},[]),v.jsx("div",{ref:n,className:"w-full h-full rounded-lg"})});function Ys({auth:t,totalTracks:e,totalMinutes:n,totalProducers:r,topProducers:i,history:a,producerNames:s,producerTrackCounts:o,genreNames:f,genreCounts:p,timeframe:g,todayTracks:N,todayProducers:x}){var k,O,$,L;const{theme:h}=Fn(),w=a.length?a[0]:null;let c=null;if(w){const B=typeof w.track_data=="string"?JSON.parse(w.track_data):w.track_data||{};if(w.source==="spotify")c=(($=(O=(k=B.album)==null?void 0:k.images)==null?void 0:O[0])==null?void 0:$.url)||null;else if(w.source==="Apple Music"){const T=(L=B.attributes)==null?void 0:L.artwork;T!=null&&T.url&&(c=T.url.replace("{w}",Math.max(100,T.width||300)).replace("{h}",Math.max(100,T.height||300)))}}const l=et.useRef(),[u,m]=et.useState(!1),[_,d]=et.useState(!1);et.useEffect(()=>{const B=()=>{d(window.innerWidth<640)};return B(),window.addEventListener("resize",B),()=>window.removeEventListener("resize",B)},[]),et.useEffect(()=>{const B=()=>{const S=document.querySelector("main[data-sidebar-collapsed]");S&&m(S.getAttribute("data-sidebar-collapsed")==="true")};B();const T=new MutationObserver(B),y=document.querySelector("main[data-sidebar-collapsed]");return y&&T.observe(y,{attributes:!0,attributeFilter:["data-sidebar-collapsed"]}),()=>T.disconnect()},[]);const b=()=>{var B,T;(T=(B=l.current)==null?void 0:B.requestFullscreen)==null||T.call(B)},A=s.map((B,T)=>{var S;const y=i.find(j=>{var E;return((E=j.producer)==null?void 0:E.name)===B});return{name:B,tracks:o[T],image_url:((S=y==null?void 0:y.producer)==null?void 0:S.image_url)||null}});console.log("chartData",A);const C={tracks:{label:"Tracks Played:  ",color:h==="dark"?"#231A55":"#6A4BFB"}};return v.jsxs(ln,{user:t==null?void 0:t.user,enableDataUpdateNotifier:!0,children:[v.jsx(nn,{title:"Music Analytics Dashboard",style:{fontSize:"54.63px",fontWeight:"700",lineHeight:"1.2"}}),v.jsxs("div",{className:"space-y-6 overflow-x-hidden",children:[v.jsx(Hn,{timeframe:g}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-5",children:[v.jsx(bt,{title:"Total Tracks",value:e.toString().slice(0,2)||"0",valueGray:e.toString().slice(2)||"",footer:"Tracks in your collection",badge:N>0?`+${N} today`:void 0,arrow:!0}),v.jsx(bt,{title:"Total Producers",value:r.toString().slice(0,2)||"0",valueGray:r.toString().slice(2)||"",footer:"Unique Producers in your library",badge:x>0?`+${x} today`:void 0}),v.jsx(bt,{title:"Most Recent",artistDescription:(w==null?void 0:w.artist_name)||"N/A",value:(w==null?void 0:w.track_name)||"N/A",footer:w?new Date(w.played_at).toLocaleString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"No recent plays",artistName:(w==null?void 0:w.album_name)||"NA",albumCover:c,isAlbum:!0}),v.jsx(bt,{title:"Listening Time",value:n.toString().slice(0,2)||"0",valueGray:`${n!=null&&n.toString().slice(2)?`${parseInt(n.toString().slice(2))} min`:"min"}`,footer:"Total listening time"})]}),v.jsxs(an,{defaultValue:"producers",className:"w-full",children:[v.jsx("div",{className:"relative w-full",children:v.jsx("div",{className:"overflow-x-auto scrollbar-hide pb-2",children:v.jsxs(sn,{className:"mb-4 w-max h-auto p-0.5 bg-white/[0.51] dark:bg-[#191919]/[0.58] rounded-full flex flex-nowrap",children:[v.jsxs(wt,{value:"producers",className:"flex items-center gap-2 px-4 sm:px-6 py-2.5 sm:py-3 rounded-full border-0 data-[state=active]:bg-[#6A4BFB] dark:data-[state=active]:bg-white data-[state=active]:text-white dark:data-[state=active]:text-black text-gray-600 dark:text-gray-400 font-medium text-sm sm:text-base transition-all whitespace-nowrap",children:[v.jsx(on,{className:"h-4 w-4"})," Producer Analytics"]}),v.jsxs(wt,{value:"history",className:"flex items-center gap-2 px-4 sm:px-6 py-2.5 sm:py-3 rounded-full border-0 data-[state=active]:bg-[#6A4BFB] dark:data-[state=active]:bg-white data-[state=active]:text-white dark:data-[state=active]:text-black text-gray-600 dark:text-gray-400 font-medium text-sm sm:text-base transition-all whitespace-nowrap",children:[v.jsx(Pn,{className:"h-4 w-4"})," Recent History"]}),v.jsxs(wt,{value:"genres",className:"flex items-center gap-2 px-4 sm:px-6 py-2.5 sm:py-3 rounded-full border-0 data-[state=active]:bg-[#6A4BFB] dark:data-[state=active]:bg-white data-[state=active]:text-white dark:data-[state=active]:text-black text-gray-600 dark:text-gray-400 font-medium text-sm sm:text-base transition-all whitespace-nowrap",children:[v.jsx(zn,{className:"h-4 w-4"})," Genre Breakdown"]}),v.jsxs(wt,{value:"top-producers",className:"flex items-center gap-2 px-4 sm:px-6 py-2.5 sm:py-3 rounded-full border-0 data-[state=active]:bg-[#6A4BFB] dark:data-[state=active]:bg-white data-[state=active]:text-white dark:data-[state=active]:text-black text-gray-600 dark:text-gray-400 font-medium text-sm sm:text-base transition-all whitespace-nowrap",children:[v.jsx(Mn,{className:"h-4 w-4"})," Top Producers"]})]})})}),v.jsxs(_t,{value:"producers",className:"space-y-4",children:[v.jsxs(Ut,{className:"rounded-[31.19px] lg:rounded-[47px] px-3 sm:px-6 py-2 sm:py-4",children:[v.jsx(Gt,{className:"px-6 py-3 pb-1 sm:pb-3",children:v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsxs("div",{children:[v.jsx(Yt,{className:"text-base sm:text-xl font-medium",children:"Top Producers"}),v.jsx(Qt,{className:"text-sm sm:text-base",children:"Most played producers in your collection"})]}),v.jsxs(pt,{variant:"ghost",className:"hidden md:flex bg-white/50 dark:bg-[#191919]/50 hover:bg-white/70 dark:hover:bg-[#191919]/70 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white px-10 py-3 rounded-xl items-center gap-2 h-auto",children:[v.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{d:"M7 17L17 7M17 7H7M17 7V17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),v.jsx("span",{className:"text-base font-normal",children:"View All"})]})]})}),v.jsx(Xt,{className:"px-6 pt-0 pb-0",children:v.jsx(Ce,{config:C,className:"h-[300px] sm:h-[400px] md:h-[450px] lg:h-[550px] w-full",children:v.jsxs(kn,{accessibilityLayer:!0,data:A,margin:{top:_?0:5,right:5,bottom:_?0:-10,left:-25},children:[v.jsxs("defs",{children:[v.jsxs("pattern",{id:"stripes-light",patternUnits:"userSpaceOnUse",width:"30",height:"30",children:[v.jsx("rect",{width:"30",height:"30",fill:"#6A4BFB"}),v.jsx("path",{d:"M0,30 L30,0 M-10,10 L10,-10 M20,40 L40,20",stroke:"#FFFFFF",strokeWidth:"2"})]}),v.jsxs("pattern",{id:"stripes-dark",patternUnits:"userSpaceOnUse",width:"30",height:"30",children:[v.jsx("rect",{width:"30",height:"30",fill:"#231A55"}),v.jsx("path",{d:"M0,30 L30,0 M-10,10 L10,-10 M20,40 L40,20",stroke:"#6A4BFB",strokeWidth:"2"})]})]}),v.jsx(Sn,{vertical:!1}),v.jsx(En,{dataKey:"name",tickLine:!1,tickMargin:10,axisLine:!1,angle:_?-45:0,textAnchor:_?"end":"middle",height:100,tick:{fontSize:13},interval:0}),v.jsx(Cn,{tickLine:!1,axisLine:!1,tickFormatter:B=>Math.floor(B).toString(),domain:[0,"dataMax"],tick:{dx:-10,fontSize:13}}),v.jsx(Te,{cursor:!1,content:({active:B,payload:T})=>{if(B&&T&&T.length){const y=T[0].payload;return v.jsx("div",{className:"bg-[#EA6115]  p-3 rounded-lg shadow-lg border border-[#EA6115]",style:{borderRadius:"25.74px"},children:v.jsxs("div",{className:"flex items-center gap-3",children:[y.image_url&&v.jsx("img",{src:y.image_url,alt:y.name,className:"w-10 h-10 rounded-full object-cover"}),v.jsxs("div",{children:[v.jsx("p",{className:"font-semibold text-sm text-white",children:y.name}),v.jsxs("p",{className:"text-sm text-gray-100",children:["Tracks Played: ",v.jsx("span",{className:"font-semibold text-[#F6BB9A]",children:y.tracks})]})]})]})})}return null}}),v.jsx(Tn,{dataKey:"tracks",fill:h==="dark"?"url(#stripes-dark)":"url(#stripes-light)",radius:8})]})})})]}),v.jsxs(Ut,{className:"rounded-[31.19px] lg:rounded-[47px] px-3 sm:px-6 py-2 sm:py-4",children:[v.jsx(Gt,{className:"px-6 pt-3 pb-0",children:v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsxs("div",{children:[v.jsx(Yt,{className:"text-base sm:text-xl font-medium",children:"Producer Relationships"}),v.jsx(Qt,{className:"text-sm sm:text-base",children:"Connections between producers in your library"})]}),v.jsxs(pt,{variant:"ghost",className:"hidden md:flex bg-white/50 dark:bg-[#191919]/50 hover:bg-white/70 dark:hover:bg-[#191919]/70 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white px-10 py-3 rounded-xl items-center gap-2 h-auto",onClick:b,children:[v.jsx(Bn,{className:"h-4 w-4"}),v.jsx("span",{className:"text-base font-normal",children:"Fullscreen"})]})]})}),v.jsx(Xt,{className:"h-[300px] sm:h-[400px] md:h-[450px] lg:h-[500px] px-6 py-0 -mt-2 sm:-mt-1 overflow-hidden",children:v.jsx(Ss,{ref:l})}),v.jsx(Ee,{className:"flex items-center justify-between px-6 py-3",children:v.jsxs("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground",children:[v.jsxs("div",{className:"flex items-center space-x-1",children:[v.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#FF5555"}})," ",v.jsx("span",{children:"Producers"})]}),v.jsxs("div",{className:"flex items-center space-x-1",children:[v.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#EA6115"}})," ",v.jsx("span",{children:"Tracks"})]}),v.jsxs("div",{className:"flex items-center space-x-1",children:[v.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#6A4BFB"}})," ",v.jsx("span",{children:"Genres"})]})]})})]})]}),v.jsx(_t,{value:"history",className:"overflow-visible",children:v.jsx(Un,{history:a})}),v.jsx(_t,{value:"genres",children:v.jsx(Gn,{genreNames:f,genreCounts:p})}),v.jsxs(_t,{value:"top-producers",className:"space-y-4",children:[i.length===0&&v.jsx("div",{className:"text-center py-10 text-muted-foreground",children:v.jsx("p",{children:"No top producers available."})}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-[repeat(auto-fill,minmax(340px,1fr))] gap-6 pb-4",children:i.length>0&&i.map((B,T)=>{var y;return v.jsx(gn,{producer:B},(y=B==null?void 0:B.producer)==null?void 0:y.id)})}),i.length>4&&v.jsx("div",{className:"flex justify-end sm:justify-end items-center mt-6 sm:mt-10 relative z-10",children:v.jsx(pt,{onClick:()=>ee.visit("/producers"),className:"bg-primary hover:bg-primary/90 text-primary-foreground font-medium text-sm tracking-wide flex items-center justify-center cursor-pointer",style:{backgroundColor:"#6A4BFB",width:"220px",height:"55px",borderRadius:"22px"},children:"LOAD MORE"})})]})]})]})]})}export{Ys as default};
