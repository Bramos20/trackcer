import{j as e,c as G,P as U,a as I,u as V,b as z,d as M,e as J,f as Q}from"./ui-UjROl1yU.js";import{a as d}from"./vendor--ALJc334.js";import{c as S,B as N}from"./button-Dq94DUpE.js";import{C as W}from"./check-BrIydDWP.js";import{A as Y}from"./AppLayout-NU6toT8G.js";import{c as P}from"./createLucideIcon-CiJFG5Iv.js";import{C as Z,a as ee}from"./chevron-right-CdanDZ7T.js";import"./charts-BlTULfni.js";import"./users-C9iRttU5.js";import"./app-D0w2CfcE.js";/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["path",{d:"M2 10v3",key:"1fnikh"}],["path",{d:"M6 6v11",key:"11sgs0"}],["path",{d:"M10 3v18",key:"yhl04a"}],["path",{d:"M14 8v7",key:"3a1oy3"}],["path",{d:"M18 5v13",key:"123xd1"}],["path",{d:"M22 10v3",key:"154ddg"}]],se=P("AudioLines",te);/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],re=P("RotateCcw",ae);/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],B=P("Trash2",ne);var E="Checkbox",[oe,we]=G(E),[ce,R]=oe(E);function ie(s){const{__scopeCheckbox:i,checked:o,children:l,defaultChecked:r,disabled:a,form:h,name:f,onCheckedChange:u,required:x,value:n="on",internal_do_not_use_render:m}=s,[b,C]=V({prop:o,defaultProp:r??!1,onChange:u,caller:E}),[k,v]=d.useState(null),[j,p]=d.useState(null),t=d.useRef(!1),c=k?!!h||!!k.closest("form"):!0,g={checked:b,disabled:a,setChecked:C,control:k,setControl:v,name:f,form:h,value:n,hasConsumerStoppedPropagationRef:t,required:x,defaultChecked:w(r)?!1:r,isFormControl:c,bubbleInput:j,setBubbleInput:p};return e.jsx(ce,{scope:i,...g,children:le(m)?m(g):l})}var D="CheckboxTrigger",T=d.forwardRef(({__scopeCheckbox:s,onKeyDown:i,onClick:o,...l},r)=>{const{control:a,value:h,disabled:f,checked:u,required:x,setControl:n,setChecked:m,hasConsumerStoppedPropagationRef:b,isFormControl:C,bubbleInput:k}=R(D,s),v=z(r,n),j=d.useRef(u);return d.useEffect(()=>{const p=a==null?void 0:a.form;if(p){const t=()=>m(j.current);return p.addEventListener("reset",t),()=>p.removeEventListener("reset",t)}},[a,m]),e.jsx(I.button,{type:"button",role:"checkbox","aria-checked":w(u)?"mixed":u,"aria-required":x,"data-state":X(u),"data-disabled":f?"":void 0,disabled:f,value:h,...l,ref:v,onKeyDown:M(i,p=>{p.key==="Enter"&&p.preventDefault()}),onClick:M(o,p=>{m(t=>w(t)?!0:!t),k&&C&&(b.current=p.isPropagationStopped(),b.current||p.stopPropagation())})})});T.displayName=D;var F=d.forwardRef((s,i)=>{const{__scopeCheckbox:o,name:l,checked:r,defaultChecked:a,required:h,disabled:f,value:u,onCheckedChange:x,form:n,...m}=s;return e.jsx(ie,{__scopeCheckbox:o,checked:r,defaultChecked:a,disabled:f,required:h,onCheckedChange:x,name:l,form:n,value:u,internal_do_not_use_render:({isFormControl:b})=>e.jsxs(e.Fragment,{children:[e.jsx(T,{...m,ref:i,__scopeCheckbox:o}),b&&e.jsx($,{__scopeCheckbox:o})]})})});F.displayName=E;var L="CheckboxIndicator",q=d.forwardRef((s,i)=>{const{__scopeCheckbox:o,forceMount:l,...r}=s,a=R(L,o);return e.jsx(U,{present:l||w(a.checked)||a.checked===!0,children:e.jsx(I.span,{"data-state":X(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:i,style:{pointerEvents:"none",...s.style}})})});q.displayName=L;var O="CheckboxBubbleInput",$=d.forwardRef(({__scopeCheckbox:s,...i},o)=>{const{control:l,hasConsumerStoppedPropagationRef:r,checked:a,defaultChecked:h,required:f,disabled:u,name:x,value:n,form:m,bubbleInput:b,setBubbleInput:C}=R(O,s),k=z(o,C),v=J(a),j=Q(l);d.useEffect(()=>{const t=b;if(!t)return;const c=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(c,"checked").set,_=!r.current;if(v!==a&&y){const A=new Event("click",{bubbles:_});t.indeterminate=w(a),y.call(t,w(a)?!1:a),t.dispatchEvent(A)}},[b,v,a,r]);const p=d.useRef(w(a)?!1:a);return e.jsx(I.input,{type:"checkbox","aria-hidden":!0,defaultChecked:h??p.current,required:f,disabled:u,name:x,value:n,form:m,...i,tabIndex:-1,ref:k,style:{...i.style,...j,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});$.displayName=O;function le(s){return typeof s=="function"}function w(s){return s==="indeterminate"}function X(s){return w(s)?"indeterminate":s?"checked":"unchecked"}function K({className:s,...i}){return e.jsx(F,{"data-slot":"checkbox",className:S("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...i,children:e.jsx(q,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(W,{className:"size-3.5"})})})}const de="/build/assets/trash-can-INMp9Pi8.svg";function Ce({notifications:s,auth:i}){const[o,l]=d.useState(s.data),[r,a]=d.useState(new Set),[h,f]=d.useState(null),[u,x]=d.useState(!1),[n,m]=d.useState(s);d.useEffect(()=>{l(s.data),m(s),a(new Set)},[s]);const b=()=>{r.size===o.length?a(new Set):a(new Set(o.map(t=>t.id)))},C=t=>{const c=new Set(r);c.has(t)?c.delete(t):c.add(t),a(c)},k=async t=>{var c;try{(await fetch(`/notifications/${t}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":((c=document.querySelector('meta[name="csrf-token"]'))==null?void 0:c.getAttribute("content"))||""}})).ok&&(l(y=>y.filter(_=>_.id!==t)),f(null))}catch(g){console.error("Error deleting notification:",g)}},v=async()=>{var t;if(r.size!==0){x(!0);try{(await fetch("/notifications/bulk-delete",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content"))||""},body:JSON.stringify({ids:Array.from(r)})})).ok&&(l(g=>g.filter(y=>!r.has(y.id))),a(new Set))}catch(c){console.error(c)}finally{x(!1)}}},j=async()=>{var t;if(confirm(`Delete all ${n.total}?`)){x(!0);try{(await fetch("/notifications/delete-all",{method:"DELETE",headers:{"X-CSRF-TOKEN":((t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content"))||""}})).ok&&(window.location.href="/notifications")}catch(c){console.error(c)}finally{x(!1)}}},p=t=>{f(c=>c===t?null:t)};return e.jsx(Y,{user:i==null?void 0:i.user,children:e.jsx("div",{className:"min-h-screen bg-background space-y-6",children:e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-normal",children:"Notifications"}),e.jsxs("div",{className:"px-4 py-3 flex items-center justify-between flex-wrap gap-5",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx(K,{checked:r.size===o.length&&o.length>0,onCheckedChange:b,className:"data-[state=checked]:!bg-[#EA6115] data-[state=checked]:!border-[#EA6115] border-[#19191950] dark:border-white/50"}),e.jsx(N,{variant:"ghost",size:"sm",className:"p-1 h-auto",children:e.jsx(re,{className:"h-4 w-4 text-[#19191950] dark:text-white/50"})}),r.size>0&&e.jsxs("button",{className:"text-white whitespace-nowrap flex items-center gap-2 text-sm bg-[rgb(255,129,59)] rounded-sm px-2 py-1",onClick:v,disabled:u,children:[e.jsx(B,{size:20}),e.jsxs("span",{children:["Delete (",r.size,")"]})]}),o.length>0&&e.jsxs("button",{className:"text-white whitespace-nowrap flex items-center gap-2 text-sm bg-[rgb(255,129,59)] rounded-sm px-2 py-1",onClick:j,disabled:u,children:[e.jsx(B,{size:20}),e.jsxs("span",{children:["Delete All (",n.total,")"]})]})]}),e.jsxs("div",{className:"text-sm text-[#19191950] dark:text-white/50 font-medium whitespace-nowrap",children:[(n.current_page-1)*n.per_page+1,"â€“",Math.min(n.current_page*n.per_page,n.total)," of"," ",n.total.toLocaleString()]})]}),e.jsxs("div",{className:"space-y-3",children:[o.length===0&&e.jsx("div",{className:"text-center py-10 text-muted-foreground",children:e.jsx("p",{children:"No notifications available."})}),o.map(t=>e.jsx(he,{notification:t,isSelected:r.has(t.id),onSelect:()=>C(t.id),isSwipedOpen:h===t.id,onDelete:()=>k(t.id),onToggle:()=>p(t.id)},t.id))]}),n.last_page>1&&e.jsxs("div",{className:"flex items-center justify-end gap-1 mt-6",children:[e.jsx(N,{variant:"ghost",size:"icon",onClick:()=>window.location.href=n.prev_page_url||"#",disabled:!n.prev_page_url,className:"h-9 w-9",children:e.jsx(Z,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center gap-1",children:n.links.slice(1,-1).map((t,c)=>{const y=n.links.slice(1,-1).findIndex(H=>H.active),A=Math.abs(c-y)>1;return e.jsx(N,{variant:t.active?"default":"ghost",size:"sm",onClick:()=>window.location.href=t.url||"#",className:`h-9 px-4 text-sm sm:text-base ${A?"hidden sm:flex":""} ${t.active?"bg-[#6A4BFB] hover:bg-[#6A4BFB]/90 text-white dark:bg-[#6A4BFB] dark:text-white dark:hover:bg-[#6A4BFB]/90":""}`,children:t.label},t.label)})}),e.jsx(N,{variant:"ghost",size:"icon",onClick:()=>window.location.href=n.next_page_url||"#",disabled:!n.next_page_url,className:"h-9 w-9",children:e.jsx(ee,{className:"h-4 w-4"})})]})]})})})}function he({notification:s,isSelected:i,onSelect:o,isSwipedOpen:l,onDelete:r,onToggle:a}){return e.jsxs("div",{className:"relative rounded-lg overflow-hidden min-h-[104px]",children:[e.jsx("div",{className:S("absolute right-0 top-0 h-full flex items-center justify-center transition-all duration-300 ease-in-out rounded-lg pl-3",l?"translate-x-0":"translate-x-full"),style:{width:100,backgroundColor:"rgb(255,129,59)"},children:e.jsx(N,{variant:"ghost",size:"sm",onClick:r,className:"text-white hover:text-white hover:bg-orange-500/20 p-2",children:e.jsx("img",{src:de,alt:"Delete",className:"h-5 w-5"})})}),e.jsxs("div",{onClick:a,className:S("relative transition-all duration-300 ease-in-out cursor-pointer select-none min-h-[104px] rounded-lg",l?"bg-[#ffebe0] dark:bg-[#372a6f]":"bg-[rgba(255,255,255,0.51)] dark:bg-[rgba(123,123,123,0.11)]"),style:{transform:`translateX(${l?"-80px":"0"})`},children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 pr-20 sm:pr-24",children:[e.jsx("div",{className:"flex-shrink-0 mr-1",onClick:h=>h.stopPropagation(),children:e.jsx(K,{checked:i,onCheckedChange:o,className:"data-[state=checked]:!bg-[#EA6115] data-[state=checked]:!border-[#EA6115] border-[#19191950] dark:border-white/50"})}),e.jsx(se,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm text-muted-foreground leading-relaxed",children:["A track associated with ",e.jsx("strong",{children:s.producer_name})," was just played."," ",e.jsx("strong",{children:s.track_name})," by ",s.artist_name]}),s.track_url&&s.source&&e.jsx("div",{className:"mt-2",children:s.source==="spotify"?e.jsx("a",{href:s.track_url,target:"_blank",rel:"noopener noreferrer",className:"inline-block",onClick:h=>h.stopPropagation(),children:e.jsxs("button",{className:"flex items-center gap-2 bg-[#1DB954] text-white z-[100] rounded-sm px-2 py-1.5",children:[e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/8/84/Spotify_icon.svg",alt:"Spotify",className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"truncate flex-1 text-center font-inter text-xs",children:"Play on Spotify"})]})}):e.jsx("a",{href:s.track_url,target:"_blank",rel:"noopener noreferrer",className:"inline-block",onClick:h=>h.stopPropagation(),children:e.jsxs("button",{className:"flex items-center gap-2 bg-gradient-to-r from-[#FA233B] to-[#FB5C74] text-white z-[100] rounded-sm px-2 py-1.5",children:[e.jsx("img",{src:"/images/Apple_Music_Icon_wht_lg_072420.svg",alt:"Apple Music",className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"truncate flex-1 text-center font-inter text-xs",children:"Play on Apple Music"})]})})})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 absolute right-3 items-end top-0 justify-between h-full py-3",children:[e.jsx("span",{className:S("text-xs px-4 py-1 rounded-xl",!s.read_at&&"bg-[#EA6115] text-white"),children:!s.read_at&&"New"}),e.jsx("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:s.created_at})]})]})]})}export{Ce as default};
